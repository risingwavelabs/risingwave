# This file is generated by ./risedev generate-example-config
# Check detailed comments in src/common/src/config.rs

[server]
heartbeat_interval_ms = 1000
connection_pool_size = 16
metrics_level = "Info"
telemetry_enabled = true
grpc_max_reset_stream = 200

[server.heap_profiling]
enable_auto = true
threshold_auto = 0.8999999761581421
dir = "./"

[meta]
min_sst_retention_time_sec = 86400
full_gc_interval_sec = 86400
collect_gc_watermark_spin_interval_sec = 5
periodic_compaction_interval_sec = 60
vacuum_interval_sec = 30
vacuum_spin_interval_ms = 200
hummock_version_checkpoint_interval_sec = 30
enable_hummock_data_archive = false
hummock_time_travel_snapshot_interval = 100
min_delta_log_num_for_hummock_version_checkpoint = 10
max_heartbeat_interval_secs = 60
disable_recovery = false
disable_automatic_parallelism_control = false
parallelism_control_batch_size = 10
parallelism_control_trigger_period_sec = 10
parallelism_control_trigger_first_delay_sec = 30
meta_leader_lease_secs = 30
default_parallelism = "Full"
enable_compaction_deterministic = false
enable_committed_sst_sanity_check = false
node_num_monitor_interval_sec = 10
backend = "Mem"
periodic_space_reclaim_compaction_interval_sec = 3600
periodic_ttl_reclaim_compaction_interval_sec = 1800
periodic_tombstone_reclaim_compaction_interval_sec = 600
periodic_scheduling_compaction_group_interval_sec = 10
move_table_size_limit = 10737418240
split_group_size_limit = 68719476736
cut_table_size_limit = 1073741824
do_not_config_object_storage_lifecycle = false
partition_vnode_count = 16
table_write_throughput_threshold = 16777216
min_table_split_write_throughput = 4194304
compaction_task_max_heartbeat_interval_secs = 30
compaction_task_max_progress_interval_secs = 600
hybrid_partition_vnode_count = 4
compact_task_table_size_partition_threshold_low = 134217728
compact_task_table_size_partition_threshold_high = 536870912
event_log_enabled = true
event_log_channel_max_size = 10
enable_dropped_column_reclaim = false

[meta.compaction_config]
max_bytes_for_level_base = 536870912
max_bytes_for_level_multiplier = 5
max_compaction_bytes = 2147483648
sub_level_max_compaction_bytes = 134217728
level0_tier_compact_file_number = 12
target_file_size_base = 33554432
compaction_filter_mask = 6
max_sub_compaction = 4
level0_stop_write_threshold_sub_level_number = 300
level0_sub_level_compact_level_count = 3
level0_overlapping_sub_level_compact_level_count = 12
max_space_reclaim_bytes = 536870912
level0_max_compact_file_number = 100
tombstone_reclaim_ratio = 40
enable_emergency_picker = true
max_level = 6

[meta.developer]
meta_cached_traces_num = 256
meta_cached_traces_memory_limit_bytes = 134217728
meta_enable_trivial_move = true
meta_enable_check_task_level_overlap = false
meta_max_trivial_move_task_count_per_loop = 256
meta_max_get_task_probe_times = 5
meta_actor_cnt_per_worker_parallelism_soft_limit = 100
meta_actor_cnt_per_worker_parallelism_hard_limit = 400

[batch]
enable_barrier_read = false
statement_timeout_in_sec = 3600
frontend_compute_runtime_worker_threads = 4
mask_worker_temporary_secs = 30
redact_sql_option_keywords = ["credential", "key", "password", "private", "secret", "token"]
enable_spill = true

[batch.developer]
batch_connector_message_buffer_size = 16
batch_output_channel_size = 64
batch_chunk_size = 1024

[streaming]
in_flight_barrier_nums = 10000
async_stack_trace = "ReleaseVerbose"
unique_user_stream_errors = 10
unsafe_enable_strict_consistency = true

[streaming.developer]
stream_enable_executor_row_count = false
stream_connector_message_buffer_size = 16
stream_unsafe_extreme_cache_size = 10
stream_chunk_size = 256
stream_exchange_initial_permits = 2048
stream_exchange_batched_permits = 256
stream_exchange_concurrent_barriers = 1
stream_exchange_concurrent_dispatchers = 0
stream_dml_channel_initial_permits = 32768
stream_hash_agg_max_dirty_groups_heap_size = 67108864
stream_memory_controller_threshold_aggressive = 0.9
stream_memory_controller_threshold_graceful = 0.81
stream_memory_controller_threshold_stable = 0.72
stream_memory_controller_eviction_factor_aggressive = 2.0
stream_memory_controller_eviction_factor_graceful = 1.5
stream_memory_controller_eviction_factor_stable = 1.0
stream_memory_controller_sequence_tls_step = 128
stream_memory_controller_sequence_tls_lag = 32
stream_enable_arrangement_backfill = true
stream_high_join_amplification_threshold = 2048
stream_enable_actor_tokio_metrics = false
stream_exchange_connection_pool_size = 1
stream_enable_auto_schema_change = true

[storage]
share_buffers_sync_parallelism = 1
share_buffer_compaction_worker_threads_number = 4
shared_buffer_flush_ratio = 0.800000011920929
shared_buffer_min_batch_flush_size_mb = 800
imm_merge_threshold = 0
write_conflict_detection_enabled = true
max_prefetch_block_number = 16
disable_remote_compactor = false
share_buffer_upload_concurrency = 8
compactor_max_task_multiplier = 3.0
compactor_memory_available_proportion = 0.8
sstable_id_remote_fetch_number = 10
min_sstable_size_mb = 32
min_sst_size_for_streaming_upload = 33554432
max_concurrent_compaction_task_number = 16
max_preload_wait_time_mill = 0
max_version_pinning_duration_sec = 10800
compactor_max_sst_key_count = 2097152
compact_iter_recreate_timeout_ms = 600000
compactor_max_sst_size = 536870912
enable_fast_compaction = true
check_compaction_result = false
max_preload_io_retry_times = 3
compactor_fast_max_compact_delete_ratio = 40
compactor_fast_max_compact_task_size = 2147483648
compactor_iter_max_io_retry_times = 8
table_info_statistic_history_times = 240
mem_table_spill_threshold = 4194304

[storage.cache.block_cache_eviction]
algorithm = "Lru"

[storage.cache.meta_cache_eviction]
algorithm = "Lru"

[storage.data_file_cache]
dir = ""
capacity_mb = 1024
file_capacity_mb = 64
flushers = 4
reclaimers = 4
recover_concurrency = 8
insert_rate_limit_mb = 0
indexer_shards = 64
compression = "None"
recover_mode = "None"

[storage.data_file_cache.runtime_config.Unified]
worker_threads = 0
max_blocking_threads = 0

[storage.meta_file_cache]
dir = ""
capacity_mb = 1024
file_capacity_mb = 64
flushers = 4
reclaimers = 4
recover_concurrency = 8
insert_rate_limit_mb = 0
indexer_shards = 64
compression = "None"
recover_mode = "None"

[storage.meta_file_cache.runtime_config.Unified]
worker_threads = 0
max_blocking_threads = 0

[storage.cache_refill]
data_refill_levels = []
timeout_ms = 6000
concurrency = 10
unit = 64
threshold = 0.5
recent_filter_layers = 6
recent_filter_rotate_interval_ms = 10000

[storage.object_store]
set_atomic_write_dir = false
opendal_upload_concurrency = 256
opendal_writer_abort_on_err = false
upload_part_size = 16777216

[storage.object_store.retry]
req_backoff_interval_ms = 1000
req_backoff_max_delay_ms = 10000
req_backoff_factor = 2
upload_attempt_timeout_ms = 8000
upload_retry_attempts = 3
streaming_upload_attempt_timeout_ms = 5000
streaming_upload_retry_attempts = 3
read_attempt_timeout_ms = 8000
read_retry_attempts = 3
streaming_read_attempt_timeout_ms = 3000
streaming_read_retry_attempts = 3
metadata_attempt_timeout_ms = 60000
metadata_retry_attempts = 3
delete_attempt_timeout_ms = 5000
delete_retry_attempts = 3
delete_objects_attempt_timeout_ms = 5000
delete_objects_retry_attempts = 3
list_attempt_timeout_ms = 600000
list_retry_attempts = 3

[storage.object_store.s3]
keepalive_ms = 600000
recv_buffer_size = 2097152
nodelay = true
retry_unknown_service_error = false
identity_resolution_timeout_s = 5

[storage.object_store.s3.developer]
retry_unknown_service_error = false
retryable_service_error_codes = ["SlowDown", "TooManyRequests"]
use_opendal = true

[system]
barrier_interval_ms = 1000
checkpoint_frequency = 1
sstable_size_mb = 256
parallel_compact_size_mb = 512
block_size_kb = 64
bloom_false_positive = 0.001
max_concurrent_creating_streaming_jobs = 1
pause_on_next_bootstrap = false
enable_tracing = false
license_key = ""
time_travel_retention_ms = 0
