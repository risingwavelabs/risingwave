# RabbitMQ Configuration for MQTT Support

# Default virtual host
default_vhost = /

# Default user and password (can be overridden by environment variables)
default_user = guest
default_pass = guest

# MQTT plugin configuration
# Listen on standard MQTT port
mqtt.listeners.tcp.default = 1883

# Allow anonymous connections for testing
mqtt.allow_anonymous = true

# Default exchange for MQTT
mqtt.exchange = amq.topic

# Session expiry interval - how long sessions last without activity (in seconds)
# RabbitMQ 3.13+ uses this instead of mqtt.subscription_ttl
mqtt.max_session_expiry_interval_seconds = 86400

# Prefetch count
mqtt.prefetch = 10

# Enable retained messages (RabbitMQ 3.13+ uses default store)
# mqtt.retained_message_store is deprecated in 3.13+

# TCP listener options
mqtt.tcp_listen_options.backlog = 128
mqtt.tcp_listen_options.nodelay = true

# Feature flags - enable mqtt_v5
# This is set via enabled_feature_flags in advanced.config or via rabbitmq-plugins

# Management plugin configuration (already enabled in rabbitmq:3-management image)
management.tcp.port = 15672

# Logging
log.console = true
log.console.level = info
