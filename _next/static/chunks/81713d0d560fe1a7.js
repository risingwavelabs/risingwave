(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31345,e=>{"use strict";e.i(76355),e.i(6464),e.i(40043),e.i(98952),e.i(62930),e.i(44588),e.i(71930),e.i(54348);let{abs:t,max:r,min:n}=Math;function i(e){return{type:e}}["w","e"].map(i),["n","s"].map(i),["n","w","e","s","nw","ne","sw","se"].map(i),e.i(85446),e.s([],31345)},21679,(e,t,r)=>{var n=e.r(59093);t.exports=function(e){return n(e,5)}},89628,65813,30105,83200,61723,e=>{"use strict";function t(e){var t=0,r=e.children,n=r&&r.length;if(n)for(;--n>=0;)t+=r[n].value;else t=1;e.value=t}function r(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=i)):void 0===t&&(t=n);for(var r,o,l,h,u,d=new s(e),c=[d];r=c.pop();)if((l=t(r.data))&&(u=(l=Array.from(l)).length))for(r.children=l,h=u-1;h>=0;--h)c.push(o=l[h]=new s(l[h])),o.parent=r,o.depth=r.depth+1;return d.eachBefore(a)}function n(e){return e.children}function i(e){return Array.isArray(e)?e[1]:null}function o(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function a(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function s(e){this.data=e,this.depth=this.height=0,this.parent=null}s.prototype=r.prototype={constructor:s,count:function(){return this.eachAfter(t)},each:function(e,t){let r=-1;for(let n of this)e.call(t,n,++r,this);return this},eachAfter:function(e,t){for(var r,n,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),r=o.children)for(n=0,i=r.length;n<i;++n)a.push(r[n]);for(;o=s.pop();)e.call(t,o,++l,this);return this},eachBefore:function(e,t){for(var r,n,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),r=i.children)for(n=r.length-1;n>=0;--n)o.push(r[n]);return this},find:function(e,t){let r=-1;for(let n of this)if(e.call(t,n,++r,this))return n},sum:function(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,n=t.children,i=n&&n.length;--i>=0;)r+=n[i].value;t.value=r})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,r=function(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),i=null;for(e=r.pop(),t=n.pop();e===t;)i=e,e=r.pop(),t=n.pop();return i}(t,e),n=[t];t!==r;)n.push(t=t.parent);for(var i=n.length;e!==r;)n.splice(i,0,e),e=e.parent;return n},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t},copy:function(){return r(this).eachBefore(o)},[Symbol.iterator]:function*(){var e,t,r,n,i=this,o=[i];do for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(r=0,n=t.length;r<n;++r)o.push(t[r]);while(o.length)}},e.s(["Node",()=>s,"default",()=>r],65813),e.s(["hierarchy",()=>r],89628);var l,h=Object.create,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,f=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),g=(e,t,r)=>(r=null!=e?h(f(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of c(t))p.call(e,i)||i===r||u(e,i,{get:()=>t[i],enumerable:!(n=d(t,i))||n.enumerable});return e})(!t&&e&&e.__esModule?r:u(r,"default",{value:e,enumerable:!0}),e)),m=v((e,t)=>{var r=function(e,t){return e<t};function n(e){if(!(this instanceof n))return new n(e);this.array=[],this.size=0,this.compare=e||r}n.prototype.clone=function(){var e=new n(this.compare);return e.size=this.size,e.array=this.array.slice(0,this.size),e},n.prototype.add=function(e){var t,r,n=this.size;for(this.array[this.size]=e,this.size+=1;n>0&&(t=n-1>>1,r=this.array[t],this.compare(e,r));)this.array[n]=r,n=t;this.array[n]=e},n.prototype.heapify=function(e){var t;for(this.array=e,this.size=e.length,t=this.size>>1;t>=0;t--)this._percolateDown(t)},n.prototype._percolateUp=function(e,t){for(var r,n,i=this.array[e];e>0&&(r=e-1>>1,n=this.array[r],!(!t&&!this.compare(i,n)));)this.array[e]=n,e=r;this.array[e]=i},n.prototype._percolateDown=function(e){for(var t,r,n,i=this.size,o=this.size>>>1,a=this.array[e];e<o&&(r=(t=(e<<1)+1)+1,n=this.array[t],r<i&&this.compare(this.array[r],n)&&(t=r,n=this.array[r]),this.compare(n,a));)this.array[e]=n,e=t;this.array[e]=a},n.prototype._removeAt=function(e){if(!(e>this.size-1||e<0))return this._percolateUp(e,!0),this.poll()},n.prototype.remove=function(e){for(var t=0;t<this.size;t++)if(!this.compare(this.array[t],e)&&!this.compare(e,this.array[t]))return this._removeAt(t),!0;return!1},n.prototype.removeOne=function(e){if("function"==typeof e){for(var t=0;t<this.size;t++)if(e(this.array[t]))return this._removeAt(t)}},n.prototype.removeMany=function(e,t){if("function"!=typeof e||this.size<1)return[];t=t?Math.min(t,this.size):this.size;for(var r=0,n=Array(t),i=0,o=Array(this.size);r<t&&!this.isEmpty();){var a=this.poll();e(a)?n[r++]=a:o[i++]=a}n.length=r;for(var s=0;s<i;)this.add(o[s++]);return n},n.prototype.peek=function(){if(0!=this.size)return this.array[0]},n.prototype.poll=function(){if(0!=this.size){var e=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,e}},n.prototype.replaceTop=function(e){if(0!=this.size){var t=this.array[0];return this.array[0]=e,this._percolateDown(0),t}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return 0===this.size},n.prototype.forEach=function(e){if(!(this.isEmpty()||"function"!=typeof e))for(var t=0,r=this.clone();!r.isEmpty();)e(r.poll(),t++)},n.prototype.kSmallest=function(e){if(0==this.size)return[];e=Math.min(this.size,e);var t=new n(this.compare);let r=Math.min((e>0?Math.pow(2,e-1):0)+1,this.size);t.size=r,t.array=this.array.slice(0,r);for(var i=Array(e),o=0;o<e;o++)i[o]=t.poll();return i},t.exports=n}),y=v((e,t)=>{function r(e,t,r,n){this.feasible=r,this.evaluation=t,this.bounded=n,this._tableau=e}t.exports=r,r.prototype.generateSolutionSet=function(){for(var e={},t=this._tableau,r=t.varIndexByRow,n=t.variablesPerIndex,i=t.matrix,o=t.rhsColumn,a=t.height-1,s=Math.round(1/t.precision),l=1;l<=a;l+=1){var h=n[r[l]];if(void 0!==h&&!0!==h.isSlack){var u=i[l][o];e[h.id]=Math.round((Number.EPSILON+u)*s)/s}}return e}}),x=v((e,t)=>{var r=y();function n(e,t,n,i,o){r.call(this,e,t,n,i),this.iter=o}t.exports=n,n.prototype=Object.create(r.prototype),n.constructor=n}),b=v((e,t)=>{var r=y(),n=x();function i(e){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=e||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}function o(e,t){this.priority=e,this.reducedCosts=Array(t);for(var r=0;r<t;r+=1)this.reducedCosts[r]=0}t.exports=i,i.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()},o.prototype.copy=function(){var e=new o(this.priority,this.reducedCosts.length);return e.reducedCosts=this.reducedCosts.slice(),e},i.prototype.setOptionalObjective=function(e,t,r){var n=this.objectivesByPriority[e];void 0===n&&(n=new o(e,Math.max(this.width,t+1)),this.objectivesByPriority[e]=n,this.optionalObjectives.push(n),this.optionalObjectives.sort(function(e,t){return e.priority-t.priority})),n.reducedCosts[t]=r},i.prototype.initialize=function(e,t,r,n){this.variables=r,this.unrestrictedVars=n,this.width=e,this.height=t;for(var i=Array(e),o=0;o<e;o++)i[o]=0;this.matrix=Array(t);for(var a=0;a<t;a++)this.matrix[a]=i.slice();this.varIndexByRow=Array(this.height),this.varIndexByCol=Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=e+t-2,this.rowByVarIndex=Array(this.nVars),this.colByVarIndex=Array(this.nVars),this.lastElementIndex=this.nVars},i.prototype._resetMatrix=function(){var e,t,r=this.model.variables,n=this.model.constraints,i=r.length,o=n.length,a=this.matrix[0],s=!0===this.model.isMinimization?-1:1;for(e=0;e<i;e+=1){var l=r[e],h=l.priority,u=s*l.cost;0===h?a[e+1]=u:this.setOptionalObjective(h,e+1,u),t=r[e].index,this.rowByVarIndex[t]=-1,this.colByVarIndex[t]=e+1,this.varIndexByCol[e+1]=t}for(var d=1,c=0;c<o;c+=1){var f=n[c],p=f.index;this.rowByVarIndex[p]=d,this.colByVarIndex[p]=-1,this.varIndexByRow[d]=p;var v,g,m=f.terms,y=m.length,x=this.matrix[d++];if(f.isUpperBound){for(v=0;v<y;v+=1)g=m[v],x[this.colByVarIndex[g.variable.index]]=g.coefficient;x[0]=f.rhs}else{for(v=0;v<y;v+=1)g=m[v],x[this.colByVarIndex[g.variable.index]]=-g.coefficient;x[0]=-f.rhs}}},i.prototype.setModel=function(e){this.model=e;var t=e.nVariables+1,r=e.nConstraints+1;return this.initialize(t,r,e.variables,e.unrestrictedVariables),this._resetMatrix(),this},i.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var e=this.lastElementIndex;return this.lastElementIndex+=1,e},i.prototype.density=function(){for(var e=0,t=this.matrix,r=0;r<this.height;r++)for(var n=t[r],i=0;i<this.width;i++)0!==n[i]&&(e+=1);return e/(this.height*this.width)},i.prototype.setEvaluation=function(){var e=Math.round(1/this.precision),t=Math.round((Number.EPSILON+this.matrix[this.costRowIndex][this.rhsColumn])*e)/e;this.evaluation=t,0===this.simplexIters&&(this.bestPossibleEval=t)},i.prototype.getSolution=function(){var e=!0===this.model.isMinimization?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new n(this,e,this.feasible,this.bounded,this.branchAndCutIterations):new r(this,e,this.feasible,this.bounded)}}),w=v(()=>{var e=b();e.prototype.simplex=function(){return this.bounded=!0,this.phase1(),!0===this.feasible&&this.phase2(),this},e.prototype.phase1=function(){for(var e,t=this.model.checkForCycles,r=[],n=this.matrix,i=this.rhsColumn,o=this.width-1,a=this.height-1,s=0;;){for(var l=0,h=-this.precision,u=1;u<=a;u++){this.unrestrictedVars[this.varIndexByRow[u]];var d=n[u][i];d<h&&(h=d,l=u)}if(0===l)return this.feasible=!0,s;for(var c=0,f=-1/0,p=n[0],v=n[l],g=1;g<=o;g++){var m=v[g];if(!0===this.unrestrictedVars[this.varIndexByCol[g]]||m<-this.precision){var y=-p[g]/m;f<y&&(f=y,c=g)}}if(0===c)return this.feasible=!1,s;if(t){r.push([this.varIndexByRow[l],this.varIndexByCol[c]]);var x=this.checkForCycles(r);if(x.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+x[0]),this.model.messages.push("Length :"+x[1]),this.feasible=!1,s}this.pivot(l,c),s+=1}},e.prototype.phase2=function(){for(var e,t,r=this.model.checkForCycles,n=[],i=this.matrix,o=this.rhsColumn,a=this.width-1,s=this.height-1,l=this.precision,h=this.optionalObjectives.length,u=null,d=0;;){var c=i[this.costRowIndex];h>0&&(u=[]);for(var f=0,p=l,v=!1,g=1;g<=a;g++){if(e=c[g],t=!0===this.unrestrictedVars[this.varIndexByCol[g]],h>0&&-l<e&&e<l){u.push(g);continue}if(t&&e<0){-e>p&&(p=-e,f=g,v=!0);continue}e>p&&(p=e,f=g,v=!1)}if(h>0)for(var m=0;0===f&&u.length>0&&m<h;){var y=[],x=this.optionalObjectives[m].reducedCosts;p=l;for(var b=0;b<u.length;b++){if(e=x[g=u[b]],t=!0===this.unrestrictedVars[this.varIndexByCol[g]],-l<e&&e<l){y.push(g);continue}if(t&&e<0){-e>p&&(p=-e,f=g,v=!0);continue}e>p&&(p=e,f=g,v=!1)}u=y,m+=1}if(0===f)return this.setEvaluation(),this.simplexIters+=1,d;for(var w=0,E=1/0,I=(this.varIndexByRow,1);I<=s;I++){var C=i[I],_=C[o],k=C[f];if(!(-l<k&&k<l)){if(k>0&&l>_&&_>-l){E=0,w=I;break}var B=v?-_/k:_/k;B>l&&E>B&&(E=B,w=I)}}if(E===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[f],d;if(r){n.push([this.varIndexByRow[w],this.varIndexByCol[f]]);var M=this.checkForCycles(n);if(M.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+M[0]),this.model.messages.push("Length :"+M[1]),this.feasible=!1,d}this.pivot(w,f,!0),d+=1}};var t=[];e.prototype.pivot=function(e,r){var n=this.matrix,i=n[e][r],o=this.height-1,a=this.width-1,s=this.varIndexByRow[e],l=this.varIndexByCol[r];this.varIndexByRow[e]=l,this.varIndexByCol[r]=s,this.rowByVarIndex[l]=e,this.rowByVarIndex[s]=-1,this.colByVarIndex[l]=-1,this.colByVarIndex[s]=r;for(var h=n[e],u=0,d=0;d<=a;d++)h[d]>=-1e-16&&h[d]<=1e-16?h[d]=0:(h[d]/=i,t[u]=d,u+=1);h[r]=1/i,this.precision;for(var c,f,p,v=0;v<=o;v++)if(v!==e&&!(n[v][r]>=-1e-16&&n[v][r]<=1e-16)){var g=n[v];if((c=g[r])>=-1e-16&&c<=1e-16)0!==c&&(g[r]=0);else{for(f=0;f<u;f++)(p=h[d=t[f]])>=-1e-16&&p<=1e-16?0!==p&&(h[d]=0):g[d]=g[d]-c*p;g[r]=-c/i}}var m=this.optionalObjectives.length;if(m>0)for(var y=0;y<m;y+=1){var x=this.optionalObjectives[y].reducedCosts;if(0!==(c=x[r])){for(f=0;f<u;f++)0!==(p=h[d=t[f]])&&(x[d]=x[d]-c*p);x[r]=-c/i}}},e.prototype.checkForCycles=function(e){for(var t=0;t<e.length-1;t++)for(var r=t+1;r<e.length;r++){var n=e[t],i=e[r];if(n[0]===i[0]&&n[1]===i[1]){if(r-t>e.length-r)break;for(var o=!0,a=1;a<r-t;a++){var s=e[t+a],l=e[r+a];if(s[0]!==l[0]||s[1]!==l[1]){o=!1;break}}if(o)return[t,r-t]}}return[]}}),E=v((e,t)=>{function r(e,t,r,n){this.id=e,this.cost=t,this.index=r,this.value=0,this.priority=n}function n(e,t,n,i){r.call(this,e,t,n,i)}function i(e,t){r.call(this,e,0,t,0)}function o(e,t){this.variable=e,this.coefficient=t}function a(e,t,r){return 0===r||"required"===r?null:(t=t||1,r=r||1,!1===e.isMinimization&&(t=-t),e.addVariable(t,"r"+e.relaxationIndex++,!1,!1,r))}function s(e,t,r,n){this.slack=new i("s"+r,r),this.index=r,this.model=n,this.rhs=e,this.isUpperBound=t,this.terms=[],this.termsByVarIndex={},this.relaxation=null}function l(e,t){this.upperBound=e,this.lowerBound=t,this.model=e.model,this.rhs=e.rhs,this.relaxation=null}n.prototype.isInteger=!0,i.prototype.isSlack=!0,s.prototype.addTerm=function(e,t){var r=t.index,n=this.termsByVarIndex[r];if(void 0===n)n=new o(t,e),this.termsByVarIndex[r]=n,this.terms.push(n),!0===this.isUpperBound&&(e=-e),this.model.updateConstraintCoefficient(this,t,e);else{var i=n.coefficient+e;this.setVariableCoefficient(i,t)}return this},s.prototype.removeTerm=function(e){return this},s.prototype.setRightHandSide=function(e){if(e!==this.rhs){var t=e-this.rhs;!0===this.isUpperBound&&(t=-t),this.rhs=e,this.model.updateRightHandSide(this,t)}return this},s.prototype.setVariableCoefficient=function(e,t){var r=t.index;if(-1===r)return void console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");var n=this.termsByVarIndex[r];if(void 0===n)this.addTerm(e,t);else if(e!==n.coefficient){var i=e-n.coefficient;!0===this.isUpperBound&&(i=-i),n.coefficient=e,this.model.updateConstraintCoefficient(this,t,i)}return this},s.prototype.relax=function(e,t){this.relaxation=a(this.model,e,t),this._relax(this.relaxation)},s.prototype._relax=function(e){null!==e&&(this.isUpperBound?this.setVariableCoefficient(-1,e):this.setVariableCoefficient(1,e))},l.prototype.isEquality=!0,l.prototype.addTerm=function(e,t){return this.upperBound.addTerm(e,t),this.lowerBound.addTerm(e,t),this},l.prototype.removeTerm=function(e){return this.upperBound.removeTerm(e),this.lowerBound.removeTerm(e),this},l.prototype.setRightHandSide=function(e){this.upperBound.setRightHandSide(e),this.lowerBound.setRightHandSide(e),this.rhs=e},l.prototype.relax=function(e,t){this.relaxation=a(this.model,e,t),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},t.exports={Constraint:s,Variable:r,IntegerVariable:n,SlackVariable:i,Equality:l,Term:o}}),I=v(()=>{var e=b(),t=E().SlackVariable;e.prototype.addCutConstraints=function(e){for(var r=e.length,n=this.height,i=n+r,o=n;o<i;o+=1)void 0===this.matrix[o]&&(this.matrix[o]=this.matrix[o-1].slice());this.height=i,this.nVars=this.width+this.height-2;for(var a,s=this.width-1,l=0;l<r;l+=1){var h=e[l],u=n+l,d="min"===h.type?-1:1,c=h.varIndex,f=this.rowByVarIndex[c],p=this.matrix[u];if(-1===f){for(p[this.rhsColumn]=d*h.value,a=1;a<=s;a+=1)p[a]=0;p[this.colByVarIndex[c]]=d}else{var v=this.matrix[f],g=v[this.rhsColumn];for(p[this.rhsColumn]=d*(h.value-g),a=1;a<=s;a+=1)p[a]=-d*v[a]}var m=this.getNewElementIndex();this.varIndexByRow[u]=m,this.rowByVarIndex[m]=u,this.colByVarIndex[m]=-1,this.variablesPerIndex[m]=new t("s"+m,m),this.nVars+=1}},e.prototype._addLowerBoundMIRCut=function(e){if(e===this.costRowIndex)return!1;this.model;var r=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[e]].isInteger)return!1;var n=r[e][this.rhsColumn],i=n-Math.floor(n);if(i<this.precision||1-this.precision<i)return!1;var o=this.height;r[o]=r[o-1].slice(),this.height+=1,this.nVars+=1;var a=this.getNewElementIndex();this.varIndexByRow[o]=a,this.rowByVarIndex[a]=o,this.colByVarIndex[a]=-1,this.variablesPerIndex[a]=new t("s"+a,a),r[o][this.rhsColumn]=Math.floor(n);for(var s=1;s<this.varIndexByCol.length;s+=1)if(this.variablesPerIndex[this.varIndexByCol[s]].isInteger){var l=r[e][s],h=Math.floor(l)+Math.max(0,l-Math.floor(l)-i)/(1-i);r[o][s]=h}else r[o][s]=Math.min(0,r[e][s]/(1-i));for(var u=0;u<this.width;u+=1)r[o][u]-=r[e][u];return!0},e.prototype._addUpperBoundMIRCut=function(e){if(e===this.costRowIndex)return!1;this.model;var r=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[e]].isInteger)return!1;var n=r[e][this.rhsColumn],i=n-Math.floor(n);if(i<this.precision||1-this.precision<i)return!1;var o=this.height;r[o]=r[o-1].slice(),this.height+=1,this.nVars+=1;var a=this.getNewElementIndex();this.varIndexByRow[o]=a,this.rowByVarIndex[a]=o,this.colByVarIndex[a]=-1,this.variablesPerIndex[a]=new t("s"+a,a),r[o][this.rhsColumn]=-i;for(var s=1;s<this.varIndexByCol.length;s+=1){var l=this.variablesPerIndex[this.varIndexByCol[s]],h=r[e][s],u=h-Math.floor(h);l.isInteger?u<=i?r[o][s]=-u:r[o][s]=-(1-u)*i/u:h>=0?r[o][s]=-h:r[o][s]=h*i/(1-i)}return!0},e.prototype.applyMIRCuts=function(){}}),C=v(()=>{var e=b();e.prototype._putInBase=function(e){var t=this.rowByVarIndex[e];if(-1===t){for(var r=this.colByVarIndex[e],n=1;n<this.height;n+=1){var i=this.matrix[n][r];if(i<-this.precision||this.precision<i){t=n;break}}this.pivot(t,r)}return t},e.prototype._takeOutOfBase=function(e){var t=this.colByVarIndex[e];if(-1===t){for(var r=this.rowByVarIndex[e],n=this.matrix[r],i=1;i<this.height;i+=1){var o=n[i];if(o<-this.precision||this.precision<o){t=i;break}}this.pivot(r,t)}return t},e.prototype.updateVariableValues=function(){for(var e=this.variables.length,t=Math.round(1/this.precision),r=0;r<e;r+=1){var n=this.variables[r],i=n.index,o=this.rowByVarIndex[i];-1===o?n.value=0:n.value=Math.round((this.matrix[o][this.rhsColumn]+Number.EPSILON)*t)/t}},e.prototype.updateRightHandSide=function(e,t){var r=this.height-1,n=this.rowByVarIndex[e.index];if(-1===n){for(var i=this.colByVarIndex[e.index],o=0;o<=r;o+=1){var a=this.matrix[o];a[this.rhsColumn]-=t*a[i]}var s=this.optionalObjectives.length;if(s>0)for(var l=0;l<s;l+=1){var h=this.optionalObjectives[l].reducedCosts;h[this.rhsColumn]-=t*h[i]}}else this.matrix[n][this.rhsColumn]-=t},e.prototype.updateConstraintCoefficient=function(e,t,r){if(e.index===t.index)throw Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var n=this._putInBase(e.index),i=this.colByVarIndex[t.index];if(-1===i)for(var o=this.rowByVarIndex[t.index],a=0;a<this.width;a+=1)this.matrix[n][a]+=r*this.matrix[o][a];else this.matrix[n][i]-=r},e.prototype.updateCost=function(e,t){var r=e.index,n=this.width-1,i=this.colByVarIndex[r];if(-1===i){var o,a=this.matrix[this.rowByVarIndex[r]];if(0===e.priority){var s=this.matrix[0];for(o=0;o<=n;o+=1)s[o]+=t*a[o]}else{var l=this.objectivesByPriority[e.priority].reducedCosts;for(o=0;o<=n;o+=1)l[o]+=t*a[o]}}else this.matrix[0][i]-=t},e.prototype.addConstraint=function(e){var t=e.isUpperBound?1:-1,r=this.height,n=this.matrix[r];void 0===n&&(n=this.matrix[0].slice(),this.matrix[r]=n);for(var i=this.width-1,o=0;o<=i;o+=1)n[o]=0;n[this.rhsColumn]=t*e.rhs;for(var a=e.terms,s=a.length,l=0;l<s;l+=1){var h=a[l],u=h.coefficient,d=h.variable.index,c=this.rowByVarIndex[d];if(-1===c)n[this.colByVarIndex[d]]+=t*u;else{var f=this.matrix[c];for(f[this.rhsColumn],o=0;o<=i;o+=1)n[o]-=t*u*f[o]}}var p=e.index;this.varIndexByRow[r]=p,this.rowByVarIndex[p]=r,this.colByVarIndex[p]=-1,this.height+=1},e.prototype.removeConstraint=function(e){var t=e.index,r=this.height-1,n=this._putInBase(t),i=this.matrix[r];this.matrix[r]=this.matrix[n],this.matrix[n]=i,this.varIndexByRow[n]=this.varIndexByRow[r],this.varIndexByRow[r]=-1,this.rowByVarIndex[t]=-1,this.availableIndexes[this.availableIndexes.length]=t,e.slack.index=-1,this.height-=1},e.prototype.addVariable=function(e){var t=this.height-1,r=this.width,n=!0===this.model.isMinimization?-e.cost:e.cost,i=e.priority,o=this.optionalObjectives.length;if(o>0)for(var a=0;a<o;a+=1)this.optionalObjectives[a].reducedCosts[r]=0;0===i?this.matrix[0][r]=n:(this.setOptionalObjective(i,r,n),this.matrix[0][r]=0);for(var s=1;s<=t;s+=1)this.matrix[s][r]=0;var l=e.index;this.varIndexByCol[r]=l,this.rowByVarIndex[l]=-1,this.colByVarIndex[l]=r,this.width+=1},e.prototype.removeVariable=function(e){var t=e.index,r=this._takeOutOfBase(t),n=this.width-1;if(r!==n){for(var i=this.height-1,o=0;o<=i;o+=1){var a=this.matrix[o];a[r]=a[n]}var s=this.optionalObjectives.length;if(s>0)for(var l=0;l<s;l+=1){var h=this.optionalObjectives[l].reducedCosts;h[r]=h[n]}var u=this.varIndexByCol[n];this.varIndexByCol[r]=u,this.colByVarIndex[u]=r}this.varIndexByCol[n]=-1,this.colByVarIndex[t]=-1,this.availableIndexes[this.availableIndexes.length]=t,e.index=-1,this.width-=1}}),_=v(()=>{b().prototype.log=function(e,t){console.log("****",e,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var r,n,i,o,a,s,l,h,u,d,c,f="",p=[" "];for(n=1;n<this.width;n+=1)a=this.varIndexByCol[n],l=(s=void 0===(o=this.variablesPerIndex[a])?"c"+a:o.id).length,h=" ",u="	",l>5?h+=" ":u+="	",p[n]=h,f+=u+s;console.log(f);var v=this.matrix[this.costRowIndex],g="	";for(r=1;r<this.width;r+=1)g+="	",g+=p[r],g+=v[r].toFixed(5);for(console.log((g+="	"+p[0]+v[0].toFixed(5))+"	Z"),i=1;i<this.height;i+=1){for(d=this.matrix[i],c="	",n=1;n<this.width;n+=1)c+="	"+p[n]+d[n].toFixed(5);c+="	"+p[0]+d[0].toFixed(5),a=this.varIndexByRow[i],console.log(c+"	"+(s=void 0===(o=this.variablesPerIndex[a])?"c"+a:o.id))}console.log("");var m=this.optionalObjectives.length;if(m>0){console.log("    Optional objectives:");for(var y=0;y<m;y+=1){var x=this.optionalObjectives[y].reducedCosts,b="";for(r=1;r<this.width;r+=1)b+=x[r]<0?"":" ",b+=p[r],b+=x[r].toFixed(5);console.log((b+=(x[0]<0?"":" ")+p[0]+x[0].toFixed(5))+" z"+y)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this}}),k=v(()=>{var e=b();e.prototype.copy=function(){var t=new e(this.precision);t.width=this.width,t.height=this.height,t.nVars=this.nVars,t.model=this.model,t.variables=this.variables,t.variablesPerIndex=this.variablesPerIndex,t.unrestrictedVars=this.unrestrictedVars,t.lastElementIndex=this.lastElementIndex,t.varIndexByRow=this.varIndexByRow.slice(),t.varIndexByCol=this.varIndexByCol.slice(),t.rowByVarIndex=this.rowByVarIndex.slice(),t.colByVarIndex=this.colByVarIndex.slice(),t.availableIndexes=this.availableIndexes.slice();for(var r=[],n=0;n<this.optionalObjectives.length;n++)r[n]=this.optionalObjectives[n].copy();t.optionalObjectives=r;for(var i=this.matrix,o=Array(this.height),a=0;a<this.height;a++)o[a]=i[a].slice();return t.matrix=o,t},e.prototype.save=function(){this.savedState=this.copy()},e.prototype.restore=function(){if(null!==this.savedState){var e,t,r=this.savedState,n=r.matrix;for(this.nVars=r.nVars,this.model=r.model,this.variables=r.variables,this.variablesPerIndex=r.variablesPerIndex,this.unrestrictedVars=r.unrestrictedVars,this.lastElementIndex=r.lastElementIndex,this.width=r.width,this.height=r.height,e=0;e<this.height;e+=1){var i=n[e],o=this.matrix[e];for(t=0;t<this.width;t+=1)o[t]=i[t]}var a=r.varIndexByRow;for(t=0;t<this.height;t+=1)this.varIndexByRow[t]=a[t];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var s=r.varIndexByCol;for(e=0;e<this.width;e+=1)this.varIndexByCol[e]=s[e];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var l=r.rowByVarIndex,h=r.colByVarIndex,u=0;u<this.nVars;u+=1)this.rowByVarIndex[u]=l[u],this.colByVarIndex[u]=h[u];if(r.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var d=0;d<r.optionalObjectives.length;d++){var c=r.optionalObjectives[d].copy();this.optionalObjectives[d]=c,this.optionalObjectivePerPriority[c.priority]=c}}}}}),B=v(()=>{var e=b();function t(e,t){this.index=e,this.value=t}e.prototype.getMostFractionalVar=function(){for(var e=0,r=null,n=null,i=this.model.integerVariables,o=i.length,a=0;a<o;a++){var s=i[a].index,l=this.rowByVarIndex[s];if(-1!==l){var h=this.matrix[l][this.rhsColumn],u=Math.abs(h-Math.round(h));e<u&&(e=u,r=s,n=h)}}return new t(r,n)},e.prototype.getFractionalVarWithLowestCost=function(){for(var e=1/0,r=null,n=null,i=this.model.integerVariables,o=i.length,a=0;a<o;a++){var s=i[a],l=s.index,h=this.rowByVarIndex[l];if(-1!==h){var u=this.matrix[h][this.rhsColumn];if(Math.abs(u-Math.round(u))>this.precision){var d=s.cost;e>d&&(e=d,r=l,n=u)}}}return new t(r,n)}}),M=v(()=>{var e=b();e.prototype.countIntegerValues=function(){for(var e=0,t=1;t<this.height;t+=1)if(this.variablesPerIndex[this.varIndexByRow[t]].isInteger){var r=this.matrix[t][this.rhsColumn];(r-=Math.floor(r))<this.precision&&-r<this.precision&&(e+=1)}return e},e.prototype.isIntegral=function(){for(var e=this.model.integerVariables,t=e.length,r=0;r<t;r++){var n=this.rowByVarIndex[e[r].index];if(-1!==n){var i=this.matrix[n][this.rhsColumn];if(Math.abs(i-Math.round(i))>this.precision)return!1}}return!0},e.prototype.computeFractionalVolume=function(e){for(var t=-1,r=1;r<this.height;r+=1)if(this.variablesPerIndex[this.varIndexByRow[r]].isInteger){var n=this.matrix[r][this.rhsColumn];if(Math.min((n=Math.abs(n))-Math.floor(n),Math.floor(n+1))<this.precision){if(!e)return 0}else -1===t?t=n:t*=n}return -1===t?0:t}}),S=v((e,t)=>{w(),I(),C(),_(),k(),B(),M(),t.exports=b()}),j=v(()=>{var e=b();function t(e,t,r){this.type=e,this.varIndex=t,this.value=r}function r(e,t){this.relaxedEvaluation=e,this.cuts=t}function n(e,t){return t.relaxedEvaluation-e.relaxedEvaluation}e.prototype.applyCuts=function(e){if(this.restore(),this.addCutConstraints(e),this.simplex(),this.model.useMIRCuts)for(var t=!0;t;){var r=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex(),this.computeFractionalVolume(!0)>=.9*r&&(t=!1)}},e.prototype.branchAndCut=function(){var e=[],i=0,o=this.model.tolerance,a=!0,s=1e99;this.model.timeout&&(s=Date.now()+this.model.timeout);for(var l=1/0,h=null,u=[],d=0;d<this.optionalObjectives.length;d+=1)u.push(1/0);var c,f=new r(-1/0,[]);for(e.push(f);e.length>0&&!0===a&&Date.now()<s;)if(c=this.model.isMinimization?this.bestPossibleEval*(1+o):this.bestPossibleEval*(1-o),o>0&&l<c&&(a=!1),!((f=e.pop()).relaxedEvaluation>l)){var p=f.cuts;if(this.applyCuts(p),i++,!1!==this.feasible){var v=this.evaluation;if(!(v>l)){if(v===l){for(var g=!0,m=0;m<this.optionalObjectives.length&&!(this.optionalObjectives[m].reducedCosts[0]>u[m]);m+=1)if(this.optionalObjectives[m].reducedCosts[0]<u[m]){g=!1;break}if(g)continue}if(!0===this.isIntegral()){if(this.__isIntegral=!0,1===i){this.branchAndCutIterations=i;return}h=f,l=v;for(var y=0;y<this.optionalObjectives.length;y+=1)u[y]=this.optionalObjectives[y].reducedCosts[0]}else{1===i&&this.save();for(var x=this.getMostFractionalVar(),b=x.index,w=[],E=[],I=p.length,C=0;C<I;C+=1){var _=p[C];_.varIndex===b?"min"===_.type?E.push(_):w.push(_):(w.push(_),E.push(_))}var k=Math.ceil(x.value),B=Math.floor(x.value),M=new t("min",b,k);w.push(M);var S=new t("max",b,B);E.push(S),e.push(new r(v,w)),e.push(new r(v,E)),e.sort(n)}}}}null!==h&&this.applyCuts(h.cuts),this.branchAndCutIterations=i}}),N=v((e,t)=>{var r=b(),n=(j(),E()),i=n.Constraint,o=n.Equality,a=n.Variable,s=n.IntegerVariable;function l(e,t){this.tableau=new r(e),this.name=t,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}n.Term,t.exports=l,l.prototype.minimize=function(){return this.isMinimization=!0,this},l.prototype.maximize=function(){return this.isMinimization=!1,this},l.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var e=this.lastElementIndex;return this.lastElementIndex+=1,e},l.prototype._addConstraint=function(e){var t=e.slack;this.tableau.variablesPerIndex[t.index]=t,this.constraints.push(e),this.nConstraints+=1,!0===this.tableauInitialized&&this.tableau.addConstraint(e)},l.prototype.smallerThan=function(e){var t=new i(e,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(t),t},l.prototype.greaterThan=function(e){var t=new i(e,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(t),t},l.prototype.equal=function(e){var t=new i(e,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(t);var r=new i(e,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(r),new o(t,r)},l.prototype.addVariable=function(e,t,r,n,i){if("string"==typeof i)switch(i){case"required":default:i=0;break;case"strong":i=1;break;case"medium":i=2;break;case"weak":i=3}var o,l=this.tableau.getNewElementIndex();return null==t&&(t="v"+l),null==e&&(e=0),null==i&&(i=0),r?(o=new s(t,e,l,i),this.integerVariables.push(o)):o=new a(t,e,l,i),this.variables.push(o),this.tableau.variablesPerIndex[l]=o,n&&(this.unrestrictedVariables[l]=!0),this.nVariables+=1,!0===this.tableauInitialized&&this.tableau.addVariable(o),o},l.prototype._removeConstraint=function(e){var t=this.constraints.indexOf(e);-1===t?console.warn("[Model.removeConstraint] Constraint not present in model"):(this.constraints.splice(t,1),this.nConstraints-=1,!0===this.tableauInitialized&&this.tableau.removeConstraint(e),e.relaxation&&this.removeVariable(e.relaxation))},l.prototype.removeConstraint=function(e){return e.isEquality?(this._removeConstraint(e.upperBound),this._removeConstraint(e.lowerBound)):this._removeConstraint(e),this},l.prototype.removeVariable=function(e){var t=this.variables.indexOf(e);return -1===t?void console.warn("[Model.removeVariable] Variable not present in model"):(this.variables.splice(t,1),!0===this.tableauInitialized&&this.tableau.removeVariable(e),this)},l.prototype.updateRightHandSide=function(e,t){return!0===this.tableauInitialized&&this.tableau.updateRightHandSide(e,t),this},l.prototype.updateConstraintCoefficient=function(e,t,r){return!0===this.tableauInitialized&&this.tableau.updateConstraintCoefficient(e,t,r),this},l.prototype.setCost=function(e,t){var r=e-t.cost;return!1===this.isMinimization&&(r=-r),t.cost=e,this.tableau.updateCost(t,r),this},l.prototype.loadJson=function(e){this.isMinimization="max"!==e.opType;for(var t=e.variables,r=e.constraints,n={},i={},a=Object.keys(r),s=a.length,l=0;l<s;l+=1){var h,u,d=a[l],c=r[d],f=c.equal,p=c.weight,v=c.priority,g=void 0!==p||void 0!==v;if(void 0===f){var m=c.min;void 0!==m&&(h=this.greaterThan(m),n[d]=h,g&&h.relax(p,v));var y=c.max;void 0!==y&&(u=this.smallerThan(y),i[d]=u,g&&u.relax(p,v))}else{h=this.greaterThan(f),n[d]=h,u=this.smallerThan(f),i[d]=u;var x=new o(h,u);g&&x.relax(p,v)}}var b=Object.keys(t),w=b.length;this.tolerance=e.tolerance||0,e.timeout&&(this.timeout=e.timeout),e.options&&(e.options.timeout&&(this.timeout=e.options.timeout),0===this.tolerance&&(this.tolerance=e.options.tolerance||0),e.options.useMIRCuts&&(this.useMIRCuts=e.options.useMIRCuts),typeof e.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=e.options.exitOnCycles);for(var E=e.ints||{},I=e.binaries||{},C=e.unrestricted||{},_=e.optimize,k=0;k<w;k+=1){var B=b[k],M=t[B],S=M[_]||0,j=!!I[B],N=!!E[B]||j,z=!!C[B],V=this.addVariable(S,B,N,z);j&&this.smallerThan(1).addTerm(1,V);var R=Object.keys(M);for(l=0;l<R.length;l+=1){var O=R[l];if(O!==_){var T=M[O],A=n[O];void 0!==A&&A.addTerm(T,V);var P=i[O];void 0!==P&&P.addTerm(T,V)}}}return this},l.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},l.prototype.solve=function(){return!1===this.tableauInitialized&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},l.prototype.isFeasible=function(){return this.tableau.feasible},l.prototype.save=function(){return this.tableau.save()},l.prototype.restore=function(){return this.tableau.restore()},l.prototype.activateMIRCuts=function(e){this.useMIRCuts=e},l.prototype.debug=function(e){this.checkForCycles=e},l.prototype.log=function(e){return this.tableau.log(e)}}),z=v(e=>{e.CleanObjectiveAttributes=function(e){var t,r,n;if("string"==typeof e.optimize)if(!e.constraints[e.optimize])return e;else{for(r in t=Math.random(),e.variables)e.variables[r][e.optimize]&&(e.variables[r][t]=e.variables[r][e.optimize]);return e.constraints[t]=e.constraints[e.optimize],delete e.constraints[e.optimize],e}for(n in e.optimize)if(e.constraints[n])if("equal"===e.constraints[n])delete e.optimize[n];else{for(r in t=Math.random(),e.variables)e.variables[r][n]&&(e.variables[r][t]=e.variables[r][n]);e.constraints[t]=e.constraints[n],delete e.constraints[n]}return e}}),V=v((e,t)=>{t.exports=function(e){return e.length?function(e){var t=/(max|min)(imize){0,}\:/i,r=/^(?!\/\*)\W{0,}int/i,n=/^(?!\/\*)\W{0,}bin/i,i=/(\>|\<){0,}\=/i,o=/^\S{0,}unrestricted/i,a=/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,s=/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,l=/(\>|\<){0,}\=/gi,h=/[^\s|^\,]+/gi,u=/[^\s|^\,]+/gi,d=/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,c=/[A-Za-z].*/,f={opType:"",optimize:"_obj",constraints:{},variables:{}},p={">=":"min","<=":"max","=":"equal"},v="",g=null,m="",y="",x="",b=0;"string"==typeof e&&(e=e.split(`
`));for(var w=0;w<e.length;w++)if(x="__"+w,v=e[w],g=null,t.test(v))f.opType=v.match(/(max|min)/gi)[0],(g=v.match(a).map(function(e){return e.replace(/\s+/,"")}).slice(1)).forEach(function(e){m=parseFloat(m=null===(m=e.match(d))?"-"===e.substr(0,1)?-1:1:m[0]),y=e.match(c)[0].replace(/\;$/,""),f.variables[y]=f.variables[y]||{},f.variables[y]._obj=m});else if(r.test(v))g=v.match(h).slice(1),f.ints=f.ints||{},g.forEach(function(e){e=e.replace(";",""),f.ints[e]=1});else if(n.test(v))g=v.match(u).slice(1),f.binaries=f.binaries||{},g.forEach(function(e){e=e.replace(";",""),f.binaries[e]=1});else if(i.test(v)){var E=v.indexOf(":");(g=(-1===E?v:v.slice(E+1)).match(a).map(function(e){return e.replace(/\s+/,"")})).forEach(function(e){m=parseFloat(m=null===(m=e.match(d))?"-"===e.substr(0,1)?-1:1:m[0]),y=e.match(c)[0],f.variables[y]=f.variables[y]||{},f.variables[y][x]=m}),b=parseFloat(v.match(s)[0]),v=p[v.match(l)[0]],f.constraints[x]=f.constraints[x]||{},f.constraints[x][v]=b}else o.test(v)&&(g=v.match(h).slice(1),f.unrestricted=f.unrestricted||{},g.forEach(function(e){e=e.replace(";",""),f.unrestricted[e]=1}));return f}(e):function(e){if(!e)throw Error("Solver requires a model to operate on");var t="",r={max:"<=",min:">=",equal:"="},n=RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(e.opType)for(var i in t+=e.opType+":",e.variables)e.variables[i][i]=e.variables[i][i]?e.variables[i][i]:1,e.variables[i][e.optimize]&&(t+=" "+e.variables[i][e.optimize]+" "+i.replace(n,"_"));else t+="max:";for(var o in t+=`;

`,e.constraints)for(var a in e.constraints[o])if("u">typeof r[a]){for(var s in e.variables)"u">typeof e.variables[s][o]&&(t+=" "+e.variables[s][o]+" "+s.replace(n,"_"));t+=" "+r[a]+" "+e.constraints[o][a]+`;
`}if(e.ints)for(var l in t+=`

`,e.ints)t+="int "+l.replace(n,"_")+`;
`;if(e.unrestricted)for(var h in t+=`

`,e.unrestricted)t+="unrestricted "+h.replace(n,"_")+`;
`;return t}(e)}}),R=v(()=>{}),O=v(()=>{}),T=v(e=>{function t(e){return(e=(e=e.replace("\\r\\n",`\r
`)).split(`\r
`)).filter(function(e){return!0!==RegExp(" 0$","gi").test(e)&&!1!==RegExp("\\d$","gi").test(e)}).map(function(e){return e.split(/\:{0,1} +(?=\d)/)}).reduce(function(e,t,r){return e[t[0]]=t[1],e},{})}e.reformat=V(),e.solve=function(e){return new Promise(function(r,n){"u">typeof window&&n("Function Not Available in Browser");var i=V()(e);e.external||n("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),e.external.binPath||n("No Executable | Binary path provided in arguments as 'binPath'"),e.external.args||n("No arguments array for cli | bash provided on 'args' attribute"),e.external.tempName||n("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on"),R().writeFile(e.external.tempName,i,function(i,o){if(i)n(i);else{var a=O().execFile;e.external.args.push(e.external.tempName),a(e.external.binPath,e.external.args,function(e,i){e?1===e.code?r(t(i)):n({code:e.code,meaning:{"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"}[e.code],data:i}):r(t(i))})}})})}}),A=v((e,t)=>{t.exports={lpsolve:T()}}),P=v((e,t)=>{t.exports=function(e,t){var r,n,i,o,a,s=t.optimize,l=JSON.parse(JSON.stringify(t.optimize)),h=Object.keys(t.optimize),u=0,d={},c="",f={},p=[];for(delete t.optimize,n=0;n<h.length;n++)l[h[n]]=0;for(n=0;n<h.length;n++){for(a in t.optimize=h[n],t.opType=s[h[n]],r=e.Solve(t,void 0,void 0,!0),h)if(!t.variables[h[a]])for(o in r[h[a]]=r[h[a]]?r[h[a]]:0,t.variables)t.variables[o][h[a]]&&r[o]&&(r[h[a]]+=r[o]*t.variables[o][h[a]]);for(c="base",i=0;i<h.length;i++)r[h[i]]?c+="-"+(1e3*r[h[i]]|0)/1e3:c+="-0";if(!d[c]){for(d[c]=1,u++,i=0;i<h.length;i++)r[h[i]]&&(l[h[i]]+=r[h[i]]);delete r.feasible,delete r.result,p.push(r)}}for(n=0;n<h.length;n++)t.constraints[h[n]]={equal:l[h[n]]/u};for(n in t.optimize="cheater-"+Math.random(),t.opType="max",t.variables)t.variables[n].cheater=1;for(n in p)for(o in p[n])f[o]=f[o]||{min:1e99,max:-1e99};for(n in f)for(o in p)p[o][n]?(p[o][n]>f[n].max&&(f[n].max=p[o][n]),p[o][n]<f[n].min&&(f[n].min=p[o][n])):(p[o][n]=0,f[n].min=0);return{midpoint:r=e.Solve(t,void 0,void 0,!0),vertices:p,ranges:f}}}),F=v((t,r)=>{let n;var i=S(),o=N(),a=j(),s=E(),l=z(),h=s.Constraint,u=s.Variable,d=s.Numeral,c=s.Term,f=A(),p=function(){this.Model=o,this.branchAndCut=a,this.Constraint=h,this.Variable=u,this.Numeral=d,this.Term=c,this.Tableau=i,this.lastSolvedModel=null,this.External=f,this.Solve=function(e,t,r,n){if(n)for(var i in l)e=l[i](e);if(!e)throw Error("Solver requires a model to operate on");if("object"==typeof e.optimize&&Object.keys(e.optimize>1))return P()(this,e);if(e.external){var a=Object.keys(f);if(a=JSON.stringify(a),!e.external.solver)throw Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+a);if(!f[e.external.solver])throw Error("No support (yet) for "+e.external.solver+". Please use one of these instead:"+a);return f[e.external.solver].solve(e)}e instanceof o||(e=new o(t).loadJson(e));var s=e.solve();if(this.lastSolvedModel=e,s.solutionSet=s.generateSolutionSet(),r)return s;var h={};return h.feasible=s.feasible,h.result=s.evaluation,h.bounded=s.bounded,s._tableau.__isIntegral&&(h.isIntegral=!0),Object.keys(s.solutionSet).forEach(function(e){0!==s.solutionSet[e]&&(h[e]=s.solutionSet[e])}),h},this.ReformatLP=V(),this.MultiObjective=function(e){return P()(this,e)}};"function"==typeof define?(n=new p,e.v(n)):"object"==typeof window?window.solver=new p:"object"==typeof self&&(self.solver=new p),r.exports=new p}),L=v((e,t)=>{var r,n,i=1e-60;do i+=i,r=1+.1*i,n=1+.2*i;while(r<=1||n<=1)t.exports=i}),D=v((e,t)=>{t.exports=function(e,t,r){let n,i;for(let t=1;t<=r;t+=1){e[t][t]=1/e[t][t],i=-e[t][t];for(let r=1;r<t;r+=1)e[r][t]*=i;if(r<(n=t+1))break;for(let o=n;o<=r;o+=1){i=e[t][o],e[t][o]=0;for(let r=1;r<=t;r+=1)e[r][o]+=i*e[r][t]}}}}),$=v((e,t)=>{t.exports=function(e,t,r,n){let i,o;for(i=1;i<=r;i+=1){o=0;for(let t=1;t<i;t+=1)o+=e[t][i]*n[t];n[i]=(n[i]-o)/e[i][i]}for(let t=1;t<=r;t+=1){i=r+1-t,n[i]/=e[i][i],o=-n[i];for(let t=1;t<i;t+=1)n[t]+=o*e[t][i]}}}),U=v((e,t)=>{t.exports=function(e,t,r,n){let i,o,a;for(let t=1;t<=r;t+=1){if(n[1]=t,a=0,(i=t-1)<1){if((a=e[t][t]-a)<=0)break;e[t][t]=Math.sqrt(a)}else{for(let r=1;r<=i;r+=1){o=e[r][t];for(let n=1;n<r;n+=1)o-=e[n][t]*e[n][r];o/=e[r][r],e[r][t]=o,a+=o*o}if((a=e[t][t]-a)<=0)break;e[t][t]=Math.sqrt(a)}n[1]=0}}}),G=v((e,t)=>{var r=L(),n=D(),i=$(),o=U();t.exports=function(e,t,a,s,l,h,u,d,c,f,p,v,g,m=0,y,x,b){let w,E,I,C,_,k,B,M,S,j,N,z,V,R,O=Math.min(s,p),T=2*s+O*(O+5)/2+2*p+1;for(let e=1;e<=s;e+=1)x[e]=t[e];for(let e=s+1;e<=T;e+=1)x[e]=0;for(let e=1;e<=p;e+=1)g[e]=0,h[e]=0;let A=[];if(0===b[1]){if(o(e,a,s,A),0!==A[1]){b[1]=2;return}i(e,a,s,t),n(e,a,s)}else{for(let r=1;r<=s;r+=1){l[r]=0;for(let n=1;n<=r;n+=1)l[r]+=e[n][r]*t[n]}for(let r=1;r<=s;r+=1){t[r]=0;for(let n=r;n<=s;n+=1)t[r]+=e[r][n]*l[n]}}u[1]=0;for(let r=1;r<=s;r+=1){l[r]=t[r],u[1]+=x[r]*l[r],x[r]=0;for(let t=r+1;t<=s;t+=1)e[t][r]=0}u[1]=-u[1]/2,b[1]=0;let P=s+s,F=P+O,L=F+O+1,D=L+O*(O+1)/2,$=D+p;for(let e=1;e<=p;e+=1){k=0;for(let t=1;t<=s;t+=1)k+=d[t][e]*d[t][e];x[$+e]=Math.sqrt(k)}function U(){return x[F+C]=x[F+C+1],x[F+C+1]=0,g[C]=0,C-=1,y[2]+=1,0}for(C=m,y[1]=0,y[2]=0,R=0;;){if(999===(R=function(){y[1]+=1,T=D;for(let e=1;e<=p;e+=1){T+=1,k=-c[e];for(let t=1;t<=s;t+=1)k+=d[t][e]*l[t];if(Math.abs(k)<r&&(k=0),e>v)x[T]=k;else if(x[T]=-Math.abs(k),k>0){for(let t=1;t<=s;t+=1)d[t][e]=-d[t][e];c[e]=-c[e]}}for(let e=1;e<=C;e+=1)x[D+g[e]]=0;I=0,_=0;for(let e=1;e<=p;e+=1)x[D+e]<_*x[$+e]&&(I=e,_=x[D+e]/x[$+e]);if(0===I){for(let e=1;e<=C;e+=1)h[g[e]]=x[F+e];return 999}return 0}()))return;for(;0!==(R=function(){for(let t=1;t<=s;t+=1){k=0;for(let r=1;r<=s;r+=1)k+=e[r][t]*d[r][I];x[t]=k}w=s;for(let e=1;e<=s;e+=1)x[w+e]=0;for(let t=C+1;t<=s;t+=1)for(let r=1;r<=s;r+=1)x[w+r]=x[w+r]+e[r][t]*x[t];z=!0;for(let e=C;e>=1;e-=1){k=x[e],w=(T=L+e*(e+3)/2)-e;for(let t=e+1;t<=C;t+=1)k-=x[T]*x[P+t],T+=t;k/=x[w],x[P+e]=k,!(g[e]<=v)&&(k<=0||(z=!1,E=e))}if(!z){B=x[F+E]/x[P+E];for(let e=1;e<=C;e+=1)g[e]<=v||x[P+e]<=0||(_=x[F+e]/x[P+e])<B&&(B=_,E=e)}k=0;for(let e=s+1;e<=s+s;e+=1)k+=x[e]*x[e];if(Math.abs(k)<=r){if(z)return b[1]=1,999;for(let e=1;e<=C;e+=1)x[F+e]=x[F+e]-B*x[P+e];return x[F+C+1]=x[F+C+1]+B,700}k=0;for(let e=1;e<=s;e+=1)k+=x[s+e]*d[e][I];M=-x[D+I]/k,V=!0,z||B<M&&(M=B,V=!1);for(let e=1;e<=s;e+=1)l[e]+=M*x[s+e],Math.abs(l[e])<r&&(l[e]=0);u[1]+=M*k*(M/2+x[F+C+1]);for(let e=1;e<=C;e+=1)x[F+e]=x[F+e]-M*x[P+e];if(x[F+C+1]=x[F+C+1]+M,V){g[C+=1]=I,T=L+(C-1)*C/2+1;for(let e=1;e<=C-1;e+=1)x[T]=x[e],T+=1;if(C===s)x[T]=x[s];else{for(let t=s;t>=C+1;t-=1)if(0!==x[t]&&(S=Math.max(Math.abs(x[t-1]),Math.abs(x[t])),j=Math.min(Math.abs(x[t-1]),Math.abs(x[t])),_=x[t-1]>=0?Math.abs(S*Math.sqrt(1+j*j/(S*S))):-Math.abs(S*Math.sqrt(1+j*j/(S*S))),S=x[t-1]/_,j=x[t]/_,1!==S))if(0===S){x[t-1]=j*_;for(let r=1;r<=s;r+=1)_=e[r][t-1],e[r][t-1]=e[r][t],e[r][t]=_}else{x[t-1]=_,N=j/(1+S);for(let r=1;r<=s;r+=1)_=S*e[r][t-1]+j*e[r][t],e[r][t]=N*(e[r][t-1]+_)-e[r][t],e[r][t-1]=_}x[T]=x[C]}}else{k=-c[I];for(let e=1;e<=s;e+=1)k+=l[e]*d[e][I];if(I>v)x[D+I]=k;else if(x[D+I]=-Math.abs(k),k>0){for(let e=1;e<=s;e+=1)d[e][I]=-d[e][I];c[I]=-c[I]}return 700}return 0}());){if(999===R)return;if(700===R)if(E===C)U();else{for(;function(){if(0!==x[w=(T=L+E*(E+1)/2+1)+E]&&(S=Math.max(Math.abs(x[w-1]),Math.abs(x[w])),j=Math.min(Math.abs(x[w-1]),Math.abs(x[w])),_=x[w-1]>=0?Math.abs(S*Math.sqrt(1+j*j/(S*S))):-Math.abs(S*Math.sqrt(1+j*j/(S*S))),S=x[w-1]/_,j=x[w]/_,1!==S))if(0===S){for(let e=E+1;e<=C;e+=1)_=x[w-1],x[w-1]=x[w],x[w]=_,w+=e;for(let t=1;t<=s;t+=1)_=e[t][E],e[t][E]=e[t][E+1],e[t][E+1]=_}else{N=j/(1+S);for(let e=E+1;e<=C;e+=1)_=S*x[w-1]+j*x[w],x[w]=N*(x[w-1]+_)-x[w],x[w-1]=_,w+=e;for(let t=1;t<=s;t+=1)_=S*e[t][E]+j*e[t][E+1],e[t][E+1]=N*(e[t][E]+_)-e[t][E+1],e[t][E]=_}}(),797===(R=function(){w=T-E;for(let e=1;e<=E;e+=1)x[w]=x[T],T+=1,w+=1;return x[F+E]=x[F+E+1],g[E]=g[E+1],797*((E+=1)<C)}()););U()}}}}}),q=v(e=>{var t=G();e.solveQP=function(e,r,n,i=[],o=0,a=[0,0]){let s=[],l=[],h=[],u=[],d=[],c=[],f="",p=e.length-1,v=n[1].length-1;if(!i)for(let e=1;e<=v;e+=1)i[e]=0;if(p!==e[1].length-1&&(f="Dmat is not symmetric!"),p!==r.length-1&&(f="Dmat and dvec are incompatible!"),p!==n.length-1&&(f="Amat and dvec are incompatible!"),v!==i.length-1&&(f="Amat and bvec are incompatible!"),(o>v||o<0)&&(f="Value of meq is invalid!"),""!==f)return{message:f};for(let e=1;e<=v;e+=1)l[e]=0,u[e]=0;let g=Math.min(p,v);for(let e=1;e<=p;e+=1)h[e]=0;s[1]=0;for(let e=1;e<=2*p+g*(g+5)/2+2*v+1;e+=1)d[e]=0;for(let e=1;e<=2;e+=1)c[e]=0;return t(e,r,p,p,h,u,s,n,i,p,v,o,l,0,c,d,a),1===a[1]&&(f="constraints are inconsistent, no solution!"),2===a[1]&&(f="matrix D in quadratic function is not positive definite!"),{solution:h,Lagrangian:u,value:s,unconstrained_solution:r,iterations:c,iact:l,message:f}}}),W=v((e,t)=>{t.exports=q()});function*H(e){let t=0;for(let r of e)yield[t++,r]}function J(e,t,r){let n=r;for(let[r,i]of H(e))n=t(n,i,r);return n}function*Y(e,t){for(let[r,n]of H(e))yield t(n,r)}function X(e,t){for(let[r,n]of H(e))if(t(n,r))return!0;return!1}function Z(e){let{done:t,value:r}=e.values().next();if(!t)return e.delete(r),r}function K(e,t,r){let n=e.get(t);void 0===n?e.set(t,[r]):n.push(r)}function Q(e,t,r){let n=e.get(t);void 0===n?e.set(t,new Set([r])):n.add(r)}function ee(e,...t){let[r,...n]=e;return[r].concat(...n.map((e,r)=>{let n;return[JSON.stringify(t[r],(n=new WeakSet,(e,t)=>{if("object"==typeof t&&null!==t){if(n.has(t))return"[circular]";n.add(t)}return t})),e]})).join("")}function*et(e,...t){let r=new Set,n;for(;void 0!==(n=t.pop());)r.has(n)||(yield n,r.add(n),t.push(...e(n)))}function er(e){let t=new Map;for(let r of e)for(let e of r.ichildren())K(t,e,r);return t}g(m());var en=class{constructor(e,t,r=[],n=!1){this.child=e,this.data=t,this.points=r,this.reversed=n}},ei=class{constructor(e,t,r,n,i){this.source=e,this.target=t,this.data=r,this.points=n,this.reversed=i}},eo=class{constructor(e){e&&(this.proots=e)}[Symbol.iterator](){return this.idescendants()[Symbol.iterator]()}iroots(){return{[Symbol.iterator]:()=>this.proots[Symbol.iterator]()}}roots(){return[...this.iroots()]}*idepth(){yield*et(e=>e.ichildren(),...this.iroots())}*ibreadth(){let e=new Set,t=this.roots(),r=[];do{let n;for(r=t.reverse(),t=[];n=r.pop();)e.has(n)||(e.add(n),yield n,t.push(...n.ichildren()))}while(t.length)}*ibefore(){let e=new Map;for(let t of this)for(let r of t.ichildren())e.set(r,(e.get(r)||0)+1);let t=this.roots(),r;for(;r=t.pop();)for(let n of(yield r,r.ichildren())){let r=e.get(n);r>1?e.set(n,r-1):t.push(n)}}*iafter(){let e=this.roots(),t=new Set,r;for(;r=e.pop();)t.has(r)||(function(e,t){return!X(e,(e,r)=>!t(e,r))}(r.ichildren(),e=>t.has(e))?(t.add(r),yield r):e.push(r,...r.ichildren()))}idescendants(e="depth"){if("depth"===e)return this.idepth();if("breadth"===e)return this.ibreadth();if("before"===e)return this.ibefore();if("after"===e)return this.iafter();throw Error(`unknown iteration style: ${e}`)}descendants(e="depth"){return[...this.idescendants(e)]}ilinks(){return function*(e,t){for(let[r,n]of H(e))yield*t(n,r)}(this,e=>e.ichildLinks())}links(){return[...this.ilinks()]}size(){return J(this,e=>e+1,0)}sum(e){let t=new Map;for(let[r,n]of H(this.idescendants("after"))){let i=e(n,r),o=new Map;for(let e of(o.set(n,i),n.ichildren()))for(let[r,n]of t.get(e).entries())o.set(r,n);n.value=J(o.values(),(e,t)=>e+t,0),t.set(n,o)}return this}count(){let e=new Map;for(let t of this.idescendants("after"))if(t.ichildren()[Symbol.iterator]().next().done)e.set(t,new Set([t])),t.value=1;else{let r=new Set;for(let n of t.ichildren())for(let t of e.get(n))r.add(t);e.set(t,r),t.value=r.size}return this}height(){for(let e of this.idescendants("after"))e.value=Math.max(0,...Y(e.ichildren(),e=>e.value+1));return this}depth(){let e=er(this);for(let t of this.idescendants("before"))t.value=Math.max(0,...Y(e.get(t)??[],e=>e.value+1));return this}*isplit(){let e=er(this);function*t(t){yield*t.ichildren(),yield*e.get(t)??[]}let r=new Set(this.iroots());for(let e of this.iroots()){if(!r.delete(e))continue;let n=[e];for(let i of et(t,e))r.delete(i)&&n.push(i);yield n.length>1?new eo(n):n[0]}}split(){return[...this.isplit()]}connected(){let e=this.isplit()[Symbol.iterator]();e.next();let{done:t}=e.next();return!!t}multidag(){return void 0===this.pmultidag?this.pmultidag=X(this.iroots(),e=>e.multidag()):this.pmultidag}},ea=class extends eo{constructor(e){super(),this.data=e,this.dataChildren=[]}childrenCountsMap(){if(void 0!==this.cachedChildrenCounts)return this.cachedChildrenCounts;{let e=new Map;for(let{child:t}of this.dataChildren)e.set(t,(e.get(t)??0)+1);return this.cachedChildrenCounts=e.size===this.dataChildren.length?null:e}}iroots(){let e=[this];return{[Symbol.iterator]:()=>e[Symbol.iterator]()}}nchildren(){return this.childrenCountsMap()?.size??this.dataChildren.length}nchildLinks(){return this.dataChildren.length}nchildLinksTo(e){return this.childrenCountsMap()?.get(e)??1}*ichildren(){let e=this.childrenCountsMap();if(null===e)for(let{child:e}of this.dataChildren)yield e;else yield*e.keys()}children(){return[...this.ichildren()]}*ichildrenCounts(){let e=this.childrenCountsMap();if(null===e)for(let{child:e}of this.dataChildren)yield[e,1];else yield*e}childrenCounts(){return[...this.ichildrenCounts()]}*ichildLinks(){for(let{child:e,data:t,points:r,reversed:n}of this.dataChildren)yield new ei(this,e,t,r,n)}childLinks(){return[...this.ichildLinks()]}isplit(){return this.iroots()}split(){return this.roots()}connected(){return!0}multidag(){return void 0===this.pmultidag?this.pmultidag=null!==this.childrenCountsMap()||X(this.ichildren(),e=>e.multidag()):this.pmultidag}};function es(e){function t(t,r){return(e(t,r)??[]).map(e=>[e,void 0])}return t.wrapped=e,t}function el(e){if(function(e){try{return"string"==typeof e.id}catch{return!1}}(e))return e.id;throw Error(ee`default id function expected datum to have an id field but got '${e}'`)}function eh(e){if(function(e){try{let t=e.parentIds;return void 0===t||t instanceof Array&&t.every(e=>"string"==typeof e)}catch{return!1}}(e))return e.parentIds;throw Error(`default parentIds function expected datum to have a parentIds field but got: ${e}`)}function eu(...e){if(e.length)throw Error(`got arguments to stratify(${e}), but constructor takes no arguments. These were probably meant as data which should be called as stratify()(...)`);return function e(t){function r(e){if(!e.length)throw Error("can't stratify empty data");let r=new Map;for(let[i,o]of e.entries()){let e=function(e){if("string"!=typeof e)throw Error(`id is supposed to be string but got type ${typeof e}`);return e}(t.id(o,i)),a=t.parentData(o,i)??[],s=new ea(o);if(r.has(e))throw Error(`found a duplicate id: ${n}`);r.set(e,[s,a])}let i=[];for(let[e,t]of r.values()){for(let[n,i]of t){let t=r.get(n);if(!t)throw Error(`missing id: ${n}`);let[o]=t;o.dataChildren.push(new en(e,i))}t.length||i.push(e)}let o=t.decycle?function(e){let t=new Map;for(let r of e)for(let{child:e}of r.dataChildren)K(t,e,r);let r=new Map(Y(e,e=>[e,{indeg:t.get(e)?.length??0,outdeg:e.nchildLinks(),node:e}])),n=Math.max(...Y(function*(e,t){for(let[r,n]of H(e))t(n,r)&&(yield n)}(r.values(),({indeg:e,outdeg:t})=>e>0&&t>0),({indeg:e,outdeg:t})=>t-e));if(n===-1/0){let e=[];for(let{indeg:t,node:n}of r.values())0===t&&e.push(n);return e}let i=new Set,o=new Set,a=new Map;for(let e of r.values()){let{outdeg:t,indeg:r}=e;0===r?i.add(e):0===t?o.add(e):Q(a,t-r,e)}let s=0,l=e.length,h=n,u=Array(e.length);for(;s<l;){var d;let e=Z(i)??Z(o)??((d=a.get(h))&&Z(d));if(void 0===e)--h;else{let{node:n,indeg:d,outdeg:c}=e;for(let i of(u[e.rank=d>0&&0===c?--l:s++]=n,t.get(n)??[])){let e=r.get(i);if(void 0===e.rank&&e.indeg>0&&e.outdeg>0){let t=e.outdeg-e.indeg;a.get(t).delete(e),--e.outdeg,e.outdeg>0?Q(a,t-1,e):o.add(e)}}for(let{child:e}of n.dataChildren){let t=r.get(e);if(void 0===t.rank&&0!==t.indeg)if(0===t.outdeg)--t.indeg,0===t.indeg&&(o.delete(t),i.add(t));else{let e=t.outdeg-t.indeg;e===h&&++h,a.get(e).delete(t),--t.indeg,0===t.indeg?i.add(t):Q(a,e+1,t)}}}}let c=[],f=new Set;for(let[e,t]of u.entries()){let n=[];for(let i of t.dataChildren){let o=r.get(i.child);o.rank<e?o.node.dataChildren.push(new en(t,i.data,i.points,!0)):n.push(i)}for(let{child:e}of(n.length!==t.nchildLinks()||f.has(t)||c.push(t),n))f.add(e);t.dataChildren=n}return c}([...Y(r.values(),([e])=>e)]):i;return function(e,t){if(!e.length)throw Error("dag contained no roots; this often indicates a cycle");for(let t of new eo(e))for(let e of t.ichildren())if(e===t)throw Error(ee`node '${t.data}' contained a self loop`);if(!t)return;let r=new Set,n=new Set,i=null;for(let t of e){let e=function e(t){if(r.has(t))return[];if(n.has(t))return i=t,[t];{n.add(t);let o=[];for(let r of t.ichildren())if((o=e(r)).length)break;return n.delete(t),r.add(t),o.length&&null!==i&&o.push(t),i===t&&(i=null),o}}(t);if(e.length){let t=e.reverse().map(({data:e})=>ee`'${e}'`).join(" -> ");throw Error(`dag contained a cycle: ${t}`)}}}(o,!t.decycle),o.length>1?new eo(o):o[0]}function n(r){if(void 0===r)return t.id;{let{id:n,...i}=t;return e({...i,id:r})}}return r.id=n,r.parentData=function(r){if(void 0===r)return t.parentData;{let{parentIds:n,parentData:i,...o}=t;return e({...o,parentIds:function(e){function t(t,r){return(e(t,r)??[]).map(([e])=>e)}return t.wrapped=e,t}(r),parentData:r})}},r.parentIds=function(r){if(void 0===r)return t.parentIds;{let{parentIds:n,parentData:i,...o}=t;return e({...o,parentIds:r,parentData:es(r)})}},r.decycle=function(r){return void 0===r?t.decycle:e({...t,decycle:r})},r}({id:el,parentIds:eh,parentData:es(eh),decycle:!1})}function ed(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ec(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ef(e){let t,r,n;function i(e,n,o=0,a=e.length){if(o<a){if(0!==t(n,n))return a;do{let t=o+a>>>1;0>r(e[t],n)?o=t+1:a=t}while(o<a)}return o}return 2!==e.length?(t=ed,r=(t,r)=>ed(e(t),r),n=(t,r)=>e(t)-r):(t=e===ed||e===ec?e:ep,r=e,n=e),{left:i,center:function(e,t,r=0,o=e.length){let a=i(e,t,r,o-1);return a>r&&n(e[a-1],t)>-n(e[a],t)?a-1:a},right:function(e,n,i=0,o=e.length){if(i<o){if(0!==t(n,n))return o;do{let t=i+o>>>1;0>=r(e[t],n)?i=t+1:o=t}while(i<o)}return i}}}function ep(){return 0}var ev=ef(ed);ev.right,ev.left,ef(function(e){return null===e?NaN:+e}).center;var eg=Array.prototype;function em(e,t){let r=e.findIndex(e=>e<=t);return r>=0?r:e.length}function ey(...e){if(e.length)throw Error(`got arguments to zherebko(${e}), but constructor takes no arguments.`);return function e(t,r,n,i){function o(e){let o=[],a=0,s;for(let t of e.idescendants("before"))void 0!==s&&s.nchildLinksTo(t)>1&&++a,o.push([t,a++]),s=t;let l=function(e){let t=new Map(e),r=[];for(let[n,[i,o]]of e.entries()){let a=!1,s=e[n+1]?.[0];for(let[e,{target:n}]of H(i.ichildLinks())){let l=t.get(n);s!==n||a?r.push([o,l,i,e]):a=!0}}r.sort(([e,t],[r,n])=>t===n?r-e:t-n);let n=new Map,i=[],o=[];for(let[e,t,a,s]of r){let r=n.get(a);void 0===r&&(r=[],n.set(a,r));let l=em(o,e),h=em(i,e);l<h?(r[s]=-l-1,o[l]=t-1):(r[s]=h+1,i[h]=t-1)}return n}(o),h=0,u=0;for(let e of l.values())for(let t of e)void 0!==t&&(h=Math.min(h,t),u=Math.max(u,t));let d=-h*n+t/2;for(let[e,t]of o)e.x=d,e.y=(t+.5)*r;for(let i of e){let e=l.get(i)??[];for(let[o,{target:a,points:s}]of H(i.ichildLinks())){s.length=0,s.push({x:i.x,y:i.y});let l=e[o];if(void 0!==l){let e=(l-h+.5)*n+(l>0?t-n:0),o=i.y+r,u=a.y-r;u-o>r/2?s.push({x:e,y:o},{x:e,y:u}):s.push({x:e,y:o})}s.push({x:a.x,y:a.y})}}let c=(u-h)*n+t,f=a*r;if(null===i)return{width:c,height:f};{let[t,r]=i;for(let[e]of o)e.x*=t/c,e.y*=r/f;for(let{points:n}of e.ilinks()){let e=n.map(({x:e,y:n})=>({x:e*t/c,y:n*r/f}));n.splice(0,n.length,...e)}return{width:t,height:r}}}return o.nodeSize=function(o){if(void 0===o)return[t,r,n];{let[t,r,n]=o;return e(t,r,n,i)}},o.size=function(o){if(void 0!==o)return e(t,r,n,o);if(null===i)return i;{let[e,t]=i;return[e,t]}},o}(1,1,1,null)}eg.slice,eg.map,l=0,g(F()),g(W()),g(m()),e.s(["dagStratify",()=>eu,"zherebko",()=>ey],30105);var ex=e.i(91398),eb=e.i(12031);e.i(31345);var ew=e.i(44588),eE=e.i(13353),eI=e.i(29593),eC=e.i(21679),e_=e.i(91788);function ek({fragmentDependency:e,svgWidth:t,selectedId:r,onSelectedIdChange:n}){let i=(0,e_.useRef)(null),[o,a]=(0,e_.useState)("0px"),s=(0,e_.useCallback)(()=>{let t=ey().nodeSize([10,34,5]),r=(0,eC.default)(e),{width:n,height:i}=t(r);return{width:n,height:i,dag:r}},[e])();return(0,e_.useEffect)(()=>{let{width:e,height:o,dag:l}=s,h=i.current,u=ew.select(h),d=eE.curveMonotoneY,c=eI.line().curve(d).x(({x:e})=>e+10).y(({y:e})=>e),f=u.select(".edges").selectAll(".edge").data(l.links()),p=e=>e.attr("d",({points:e})=>c(e)).attr("fill","none").attr("stroke-width",e=>e.source.data.id===r||e.target.data.id===r?2:1).attr("stroke",e=>e.source.data.id===r||e.target.data.id===r?eb.theme.colors.blue["500"]:eb.theme.colors.gray["300"]);f.exit().remove(),f.enter().call(e=>e.append("path").attr("class","edge").call(p)),f.call(p);let v=u.select(".nodes").selectAll(".node").data(l.descendants()),g=e=>e.attr("transform",e=>`translate(${e.x+10}, ${e.y})`).attr("fill",e=>e.data.id===r?eb.theme.colors.blue["500"]:eb.theme.colors.gray["500"]);v.exit().remove(),v.enter().call(e=>e.append("circle").attr("class","node").attr("r",5).call(g)),v.call(g);let m=u.select(".labels").selectAll(".label").data(l.descendants()),y=e=>e.text(e=>e.data.name).attr("x",t-10).attr("font-family","inherit").attr("text-anchor","end").attr("alignment-baseline","middle").attr("y",e=>e.y).attr("fill",e=>e.data.id===r?eb.theme.colors.black["500"]:eb.theme.colors.gray["500"]).attr("font-weight","600");m.exit().remove(),m.enter().call(e=>e.append("text").attr("class","label").call(y)),m.call(y);let x=u.select(".overlays").selectAll(".overlay").data(l.descendants()),b=e=>e.attr("x",3).attr("height",24).attr("width",t-6).attr("y",e=>e.y-5-12+2+3).attr("rx",5).attr("fill",eb.theme.colors.gray["500"]).attr("opacity",0).style("cursor","pointer");x.exit().remove(),x.enter().call(e=>e.append("rect").attr("class","overlay").call(b).on("mouseover",function(e,t){ew.select(this).transition().duration(parseInt(eb.theme.transition.duration.normal)).attr("opacity",".10")}).on("mouseout",function(e,t){ew.select(this).transition().duration(parseInt(eb.theme.transition.duration.normal)).attr("opacity","0")}).on("mousedown",function(e,t){ew.select(this).transition().duration(parseInt(eb.theme.transition.duration.normal)).attr("opacity",".20")}).on("mouseup",function(e,t){ew.select(this).transition().duration(parseInt(eb.theme.transition.duration.normal)).attr("opacity",".10")}).on("click",function(e,t){n&&n(t.data.id)})),x.call(b),a(`${o}px`)},[e,r,t,n,s]),(0,ex.jsxs)("svg",{ref:i,width:`${t}px`,height:o,children:[(0,ex.jsx)("g",{className:"edges"}),(0,ex.jsx)("g",{className:"nodes"}),(0,ex.jsx)("g",{className:"labels"}),(0,ex.jsx)("g",{className:"overlays"})]})}e.s(["default",()=>ek],83200);var eB=e.i(58866),eM=e.i(21776),eS=e.i(72301);class ej{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function eN(e){return new ej(e,!0)}var ez=e.i(21587);function eV(e){return e.source}function eR(e){return e.target}function eO(){return function(e){let t=eV,r=eR,n=ez.x,i=ez.y,o=null,a=null;function s(){let s,l=eM.slice.call(arguments),h=t.apply(this,l),u=r.apply(this,l);if(null==o&&(a=e(s=(0,eB.path)())),a.lineStart(),l[0]=h,a.point(+n.apply(this,l),+i.apply(this,l)),l[0]=u,a.point(+n.apply(this,l),+i.apply(this,l)),a.lineEnd(),s)return a=null,s+""||null}return s.source=function(e){return arguments.length?(t=e,s):t},s.target=function(e){return arguments.length?(r=e,s):r},s.x=function(e){return arguments.length?(n="function"==typeof e?e:(0,eS.default)(+e),s):n},s.y=function(e){return arguments.length?(i="function"==typeof e?e:(0,eS.default)(+e),s):i},s.context=function(t){return arguments.length?(null==t?o=a=null:a=e(o=t),s):o},s}(eN)}e.s(["linkHorizontal",()=>eO],61723)},74238,e=>{"use strict";var t=e.i(82348),r=e.i(13695);e.s(["selectAll",0,function(e){return"string"==typeof e?new r.Selection([document.querySelectorAll(e)],[document.documentElement]):new r.Selection([(0,t.default)(e)],r.root)}],74238)},39127,e=>{"use strict";function t(e,t){return e.parent===t.parent?1:2}function r(e){var t=e.children;return t?t[0]:e.t}function n(e){var t=e.children;return t?t[t.length-1]:e.t}function i(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}i.prototype=Object.create(e.i(65813).Node.prototype),e.s(["tree",0,function(){var e=t,o=1,a=1,s=null;function l(t){var r=function(e){for(var t,r,n,o,a,s=new i(e,0),l=[s];t=l.pop();)if(n=t._.children)for(t.children=Array(a=n.length),o=a-1;o>=0;--o)l.push(r=t.children[o]=new i(n[o],o)),r.parent=t;return(s.parent=new i(null,0)).children=[s],s}(t);if(r.eachAfter(h),r.parent.m=-r.z,r.eachBefore(u),s)t.eachBefore(d);else{var n=t,l=t,c=t;t.eachBefore(function(e){e.x<n.x&&(n=e),e.x>l.x&&(l=e),e.depth>c.depth&&(c=e)});var f=n===l?1:e(n,l)/2,p=f-n.x,v=o/(l.x+f+p),g=a/(c.depth||1);t.eachBefore(function(e){e.x=(e.x+p)*v,e.y=e.depth*g})}return t}function h(t){var i=t.children,o=t.parent.children,a=t.i?o[t.i-1]:null;if(i){!function(e){for(var t,r=0,n=0,i=e.children,o=i.length;--o>=0;)t=i[o],t.z+=r,t.m+=r,r+=t.s+(n+=t.c)}(t);var s=(i[0].z+i[i.length-1].z)/2;a?(t.z=a.z+e(t._,a._),t.m=t.z-s):t.z=s}else a&&(t.z=a.z+e(t._,a._));t.parent.A=function(t,i,o){if(i){for(var a,s,l,h=t,u=t,d=i,c=h.parent.children[0],f=h.m,p=u.m,v=d.m,g=c.m;d=n(d),h=r(h),d&&h;)c=r(c),(u=n(u)).a=t,(l=d.z+v-h.z-f+e(d._,h._))>0&&(!function(e,t,r){var n=r/(t.i-e.i);t.c-=n,t.s+=r,e.c+=n,t.z+=r,t.m+=r}((a=d,s=o,a.a.parent===t.parent?a.a:s),t,l),f+=l,p+=l),v+=d.m,f+=h.m,g+=c.m,p+=u.m;d&&!n(u)&&(u.t=d,u.m+=v-p),h&&!r(c)&&(c.t=h,c.m+=f-g,o=t)}return o}(t,a,t.parent.A||o[0])}function u(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function d(e){e.x*=o,e.y=e.depth*a}return l.separation=function(t){return arguments.length?(e=t,l):e},l.size=function(e){return arguments.length?(s=!1,o=+e[0],a=+e[1],l):s?null:[o,a]},l.nodeSize=function(e){return arguments.length?(s=!0,o=+e[0],a=+e[1],l):s?[o,a]:null},l}],39127)},79862,(e,t,r)=>{var n=e.r(25975);t.exports=function(e){return"function"==typeof e?e:n}},38794,(e,t,r)=>{var n=e.r(38742),i=e.r(85049),o=e.r(79862),a=e.r(48684);t.exports=function(e,t){return(a(e)?n:i)(e,o(t))}},6557,(e,t,r)=>{t.exports=e.r(38794)},12635,(e,t,r)=>{var n=e.r(85049);t.exports=function(e,t){var r=[];return n(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}},11649,(e,t,r)=>{var n=e.r(56408),i=e.r(12635),o=e.r(5792),a=e.r(48684);t.exports=function(e,t){return(a(e)?n:i)(e,o(t,3))}},60370,(e,t,r)=>{var n=Object.prototype.hasOwnProperty;t.exports=function(e,t){return null!=e&&n.call(e,t)}},63997,(e,t,r)=>{var n=e.r(60370),i=e.r(77697);t.exports=function(e,t){return null!=e&&i(e,t,n)}},61572,(e,t,r)=>{var n=e.r(58629),i=e.r(68829),o=e.r(13266),a=e.r(48684),s=e.r(79858),l=e.r(13272),h=e.r(34274),u=e.r(75299),d=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(h(e))return!n(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}},19481,(e,t,r)=>{t.exports=function(e){return void 0===e}},29892,(e,t,r)=>{t.exports=function(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}},60109,(e,t,r)=>{t.exports=function(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}},37696,(e,t,r)=>{var n=e.r(29892),i=e.r(85049),o=e.r(5792),a=e.r(60109),s=e.r(48684);t.exports=function(e,t,r){var l=s(e)?n:a,h=arguments.length<3;return l(e,o(t,4),r,h,i)}},50173,(e,t,r)=>{t.exports=e.r(43054)("length")},47167,(e,t,r)=>{var n="\\ud800-\\udfff",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="[^"+n+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",h="(?:"+i+"|"+o+")?",u="[\\ufe0e\\ufe0f]?",d="(?:\\u200d(?:"+[a,s,l].join("|")+")"+u+h+")*",c=RegExp(o+"(?="+o+")|"+("(?:"+[a+i+"?",i,s,l,"["+n+"]"].join("|"))+")"+(u+h+d),"g");t.exports=function(e){for(var t=c.lastIndex=0;c.test(e);)++t;return t}},65478,(e,t,r)=>{var n=e.r(50173),i=e.r(34464),o=e.r(47167);t.exports=function(e){return i(e)?o(e):n(e)}},2298,(e,t,r)=>{var n=e.r(58629),i=e.r(68829),o=e.r(79858),a=e.r(35019),s=e.r(65478);t.exports=function(e){if(null==e)return 0;if(o(e))return a(e)?s(e):e.length;var t=i(e);return"[object Map]"==t||"[object Set]"==t?e.size:n(e).length}},99724,(e,t,r)=>{var n=e.r(38742),i=e.r(13043),o=e.r(33991),a=e.r(5792),s=e.r(61978),l=e.r(48684),h=e.r(13272),u=e.r(38299),d=e.r(3275),c=e.r(75299);t.exports=function(e,t,r){var f=l(e),p=f||h(e)||c(e);if(t=a(t,4),null==r){var v=e&&e.constructor;r=p?f?new v:[]:d(e)&&u(v)?i(s(e)):{}}return(p?n:o)(e,function(e,n,i){return t(r,e,n,i)}),r}},63098,(e,t,r)=>{var n=e.r(79858),i=e.r(32836);t.exports=function(e){return i(e)&&n(e)}},51927,(e,t,r)=>{var n=e.r(66762),i=e.r(23428),o=e.r(81708),a=e.r(63098);t.exports=i(function(e){return o(n(e,1,a,!0))})},28772,(e,t,r)=>{var n=e.r(48346);t.exports=function(e,t){return n(t,function(t){return e[t]})}},36890,(e,t,r)=>{var n=e.r(28772),i=e.r(22335);t.exports=function(e){return null==e?[]:n(e,i(e))}},72536,(e,t,r)=>{var n;try{n={clone:e.r(62269),constant:e.r(65359),each:e.r(6557),filter:e.r(11649),has:e.r(63997),isArray:e.r(48684),isEmpty:e.r(61572),isFunction:e.r(38299),isUndefined:e.r(19481),keys:e.r(22335),map:e.r(82447),reduce:e.r(37696),size:e.r(2298),transform:e.r(99724),union:e.r(51927),values:e.r(36890)}}catch(e){}n||(n=window._),t.exports=n},27636,(e,t,r)=>{"use strict";var n=e.r(72536);function i(e){this._isDirected=!n.has(e,"directed")||e.directed,this._isMultigraph=!!n.has(e,"multigraph")&&e.multigraph,this._isCompound=!!n.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function o(e,t){e[t]?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function s(e,t,r,i){var o=""+t,a=""+r;if(!e&&o>a){var s=o;o=a,a=s}return o+"\x01"+a+"\x01"+(n.isUndefined(i)?"\0":i)}function l(e,t){return s(e,t.v,t.w,t.name)}t.exports=i,i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(e){return this._label=e,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultNodeLabelFn=e,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return n.keys(this._nodes)},i.prototype.sources=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._in[t])})},i.prototype.sinks=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._out[t])})},i.prototype.setNodes=function(e,t){var r=arguments,i=this;return n.each(e,function(e){r.length>1?i.setNode(e,t):i.setNode(e)}),this},i.prototype.setNode=function(e,t){return n.has(this._nodes,e)?arguments.length>1&&(this._nodes[e]=t):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this},i.prototype.node=function(e){return this._nodes[e]},i.prototype.hasNode=function(e){return n.has(this._nodes,e)},i.prototype.removeNode=function(e){var t=this;if(n.has(this._nodes,e)){var r=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],n.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),n.each(n.keys(this._in[e]),r),delete this._in[e],delete this._preds[e],n.each(n.keys(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},i.prototype.setParent=function(e,t){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(n.isUndefined(t))t="\0";else{t+="";for(var r=t;!n.isUndefined(r);r=this.parent(r))if(r===e)throw Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},i.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},i.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}},i.prototype.children=function(e){if(n.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return n.keys(t)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]},i.prototype.predecessors=function(e){var t=this._preds[e];if(t)return n.keys(t)},i.prototype.successors=function(e){var t=this._sucs[e];if(t)return n.keys(t)},i.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return n.union(t,this.successors(e))},i.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},i.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;n.each(this._nodes,function(r,n){e(n)&&t.setNode(n,r)}),n.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))});var i={};return this._isCompound&&n.each(t.nodes(),function(e){t.setParent(e,function e(n){var o=r.parent(n);return void 0===o||t.hasNode(o)?(i[n]=o,o):o in i?i[o]:e(o)}(e))}),t},i.prototype.setDefaultEdgeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultEdgeLabelFn=e,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return n.values(this._edgeObjs)},i.prototype.setPath=function(e,t){var r=this,i=arguments;return n.reduce(e,function(e,n){return i.length>1?r.setEdge(e,n,t):r.setEdge(e,n),n}),this},i.prototype.setEdge=function(){var e,t,r,i,a=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(e=l.v,t=l.w,r=l.name,2==arguments.length&&(i=arguments[1],a=!0)):(e=l,t=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),e=""+e,t=""+t,n.isUndefined(r)||(r=""+r);var h=s(this._isDirected,e,t,r);if(n.has(this._edgeLabels,h))return a&&(this._edgeLabels[h]=i),this;if(!n.isUndefined(r)&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[h]=a?i:this._defaultEdgeLabelFn(e,t,r);var u=function(e,t,r,n){var i=""+t,o=""+r;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return n&&(s.name=n),s}(this._isDirected,e,t,r);return e=u.v,t=u.w,Object.freeze(u),this._edgeObjs[h]=u,o(this._preds[t],e),o(this._sucs[e],t),this._in[t][h]=u,this._out[e][h]=u,this._edgeCount++,this},i.prototype.edge=function(e,t,r){var n=1==arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,e,t,r);return this._edgeLabels[n]},i.prototype.hasEdge=function(e,t,r){var i=1==arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,e,t,r);return n.has(this._edgeLabels,i)},i.prototype.removeEdge=function(e,t,r){var n=1==arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,e,t,r),i=this._edgeObjs[n];return i&&(e=i.v,t=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],a(this._preds[t],e),a(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this},i.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var i=n.values(r);return t?n.filter(i,function(e){return e.v===t}):i}},i.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var i=n.values(r);return t?n.filter(i,function(e){return e.w===t}):i}},i.prototype.nodeEdges=function(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))}},49742,(e,t,r)=>{t.exports="2.1.8"},31431,(e,t,r)=>{t.exports={Graph:e.r(27636),version:e.r(49742)}},96559,(e,t,r)=>{var n=e.r(72536),i=e.r(27636);t.exports={write:function(e){var t,r,i={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e,n.map(t.nodes(),function(e){var r=t.node(e),i=t.parent(e),o={v:e};return n.isUndefined(r)||(o.value=r),n.isUndefined(i)||(o.parent=i),o})),edges:(r=e,n.map(r.edges(),function(e){var t=r.edge(e),i={v:e.v,w:e.w};return n.isUndefined(e.name)||(i.name=e.name),n.isUndefined(t)||(i.value=t),i}))};return n.isUndefined(e.graph())||(i.value=n.clone(e.graph())),i},read:function(e){var t=new i(e.options).setGraph(e.value);return n.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),n.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},3408,(e,t,r)=>{var n=e.r(72536);t.exports=function(e){var t,r={},i=[];return n.each(e.nodes(),function(o){t=[],function i(o){n.has(r,o)||(r[o]=!0,t.push(o),n.each(e.successors(o),i),n.each(e.predecessors(o),i))}(o),t.length&&i.push(t)}),i}},40572,(e,t,r)=>{var n=e.r(72536);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(e){return e.key})},i.prototype.has=function(e){return n.has(this._keyIndices,e)},i.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},i.prototype.min=function(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(e,t){var r=this._keyIndices;if(e=String(e),!n.has(r,e)){var i=this._arr,o=i.length;return r[e]=o,i.push({key:e,priority:t}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},i.prototype.decrease=function(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+t);this._arr[r].priority=t,this._decrease(r)},i.prototype._heapify=function(e){var t=this._arr,r=2*e,n=r+1,i=e;r<t.length&&(i=t[r].priority<t[i].priority?r:i,n<t.length&&(i=t[n].priority<t[i].priority?n:i),i!==e&&(this._swap(e,i),this._heapify(i)))},i.prototype._decrease=function(e){for(var t,r=this._arr,n=r[e].priority;0!==e&&!(r[t=e>>1].priority<n);)this._swap(e,t),e=t},i.prototype._swap=function(e,t){var r=this._arr,n=this._keyIndices,i=r[e],o=r[t];r[e]=o,r[t]=i,n[o.key]=e,n[i.key]=t}},41509,(e,t,r)=>{var n=e.r(72536),i=e.r(40572);t.exports=function(e,t,r,n){return function(e,t,r,n){var o,a,s={},l=new i,h=function(e){var t=e.v!==o?e.v:e.w,n=s[t],i=r(e),h=a.distance+i;if(i<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+i);h<n.distance&&(n.distance=h,n.predecessor=o,l.decrease(t,h))};for(e.nodes().forEach(function(e){var r=e===t?0:1/0;s[e]={distance:r},l.add(e,r)});l.size()>0&&(a=s[o=l.removeMin()]).distance!==1/0;)n(o).forEach(h);return s}(e,String(t),r||o,n||function(t){return e.outEdges(t)})};var o=n.constant(1)},32680,(e,t,r)=>{var n=e.r(41509),i=e.r(72536);t.exports=function(e,t,r){return i.transform(e.nodes(),function(i,o){i[o]=n(e,o,t,r)},{})}},22872,(e,t,r)=>{var n=e.r(72536);t.exports=function(e){var t=0,r=[],i={},o=[];return e.nodes().forEach(function(a){n.has(i,a)||function a(s){var l=i[s]={onStack:!0,lowlink:t,index:t++};if(r.push(s),e.successors(s).forEach(function(e){n.has(i,e)?i[e].onStack&&(l.lowlink=Math.min(l.lowlink,i[e].index)):(a(e),l.lowlink=Math.min(l.lowlink,i[e].lowlink))}),l.lowlink===l.index){var h,u=[];do i[h=r.pop()].onStack=!1,u.push(h);while(s!==h)o.push(u)}}(a)}),o}},44809,(e,t,r)=>{var n=e.r(72536),i=e.r(22872);t.exports=function(e){return n.filter(i(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},56388,(e,t,r)=>{var n=e.r(72536);t.exports=function(e,t,r){var n,o,a,s,l;return n=e,o=t||i,a=r||function(t){return e.outEdges(t)},s={},(l=n.nodes()).forEach(function(e){s[e]={},s[e][e]={distance:0},l.forEach(function(t){e!==t&&(s[e][t]={distance:1/0})}),a(e).forEach(function(t){var r=t.v===e?t.w:t.v,n=o(t);s[e][r]={distance:n,predecessor:e}})}),l.forEach(function(e){var t=s[e];l.forEach(function(r){var n=s[r];l.forEach(function(r){var i=n[e],o=t[r],a=n[r],s=i.distance+o.distance;s<a.distance&&(a.distance=s,a.predecessor=o.predecessor)})})}),s};var i=n.constant(1)},98875,(e,t,r)=>{var n=e.r(72536);function i(e){var t={},r={},i=[];if(n.each(e.sinks(),function a(s){if(n.has(r,s))throw new o;n.has(t,s)||(r[s]=!0,t[s]=!0,n.each(e.predecessors(s),a),delete r[s],i.push(s))}),n.size(t)!==e.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o,o.prototype=Error()},25534,(e,t,r)=>{var n=e.r(98875);t.exports=function(e){try{n(e)}catch(e){if(e instanceof n.CycleException)return!1;throw e}return!0}},69769,(e,t,r)=>{var n=e.r(72536);t.exports=function(e,t,r){n.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],a={};return n.each(t,function(t){if(!e.hasNode(t))throw Error("Graph does not have node: "+t);!function e(t,r,i,o,a,s){!n.has(o,r)&&(o[r]=!0,i||s.push(r),n.each(a(r),function(r){e(t,r,i,o,a,s)}),i&&s.push(r))}(e,t,"post"===r,a,i,o)}),o}},72613,(e,t,r)=>{var n=e.r(69769);t.exports=function(e,t){return n(e,t,"post")}},20652,(e,t,r)=>{var n=e.r(69769);t.exports=function(e,t){return n(e,t,"pre")}},62901,(e,t,r)=>{var n=e.r(72536),i=e.r(27636),o=e.r(40572);t.exports=function(e,t){var r,a=new i,s={},l=new o;function h(e){var n=e.v===r?e.w:e.v,i=l.priority(n);if(void 0!==i){var o=t(e);o<i&&(s[n]=r,l.decrease(n,o))}}if(0===e.nodeCount())return a;n.each(e.nodes(),function(e){l.add(e,1/0),a.setNode(e)}),l.decrease(e.nodes()[0],0);for(var u=!1;l.size()>0;){if(r=l.removeMin(),n.has(s,r))a.setEdge(r,s[r]);else if(u)throw Error("Input graph is not connected: "+e);else u=!0;e.nodeEdges(r).forEach(h)}return a}},43265,(e,t,r)=>{t.exports={components:e.r(3408),dijkstra:e.r(41509),dijkstraAll:e.r(32680),findCycles:e.r(44809),floydWarshall:e.r(56388),isAcyclic:e.r(25534),postorder:e.r(72613),preorder:e.r(20652),prim:e.r(62901),tarjan:e.r(22872),topsort:e.r(98875)}},82758,(e,t,r)=>{var n=e.r(31431);t.exports={Graph:n.Graph,json:e.r(96559),alg:e.r(43265),version:n.version}},68779,(e,t,r)=>{var n;try{n=e.r(82758)}catch(e){}n||(n=window.graphlib),t.exports=n},90031,(e,t,r)=>{var n=e.r(23428),i=e.r(98373),o=e.r(22986),a=e.r(84663),s=Object.prototype,l=s.hasOwnProperty;t.exports=n(function(e,t){e=Object(e);var r=-1,n=t.length,h=n>2?t[2]:void 0;for(h&&o(t[0],t[1],h)&&(n=1);++r<n;)for(var u=t[r],d=a(u),c=-1,f=d.length;++c<f;){var p=d[c],v=e[p];(void 0===v||i(v,s[p])&&!l.call(e,p))&&(e[p]=u[p])}return e})},51660,(e,t,r)=>{var n=e.r(66762);t.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},36738,(e,t,r)=>{var n=e.r(64353),i=e.r(79862),o=e.r(84663);t.exports=function(e,t){return null==e?e:n(e,i(t),o)}},73694,(e,t,r)=>{var n=e.r(98629),i=e.r(98373);t.exports=function(e,t,r){(void 0===r||i(e[t],r))&&(void 0!==r||t in e)||n(e,t,r)}},7402,(e,t,r)=>{var n=e.r(12904),i=e.r(61978),o=e.r(32836),a=Object.prototype,s=Function.prototype.toString,l=a.hasOwnProperty,h=s.call(Object);t.exports=function(e){if(!o(e)||"[object Object]"!=n(e))return!1;var t=i(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&s.call(r)==h}},43514,(e,t,r)=>{t.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},34382,(e,t,r)=>{var n=e.r(78649),i=e.r(84663);t.exports=function(e){return n(e,i(e))}},75614,(e,t,r)=>{var n=e.r(73694),i=e.r(13278),o=e.r(74935),a=e.r(38402),s=e.r(31785),l=e.r(13266),h=e.r(48684),u=e.r(63098),d=e.r(13272),c=e.r(38299),f=e.r(3275),p=e.r(7402),v=e.r(75299),g=e.r(43514),m=e.r(34382);t.exports=function(e,t,r,y,x,b,w){var E=g(e,r),I=g(t,r),C=w.get(I);if(C)return void n(e,r,C);var _=b?b(E,I,r+"",e,t,w):void 0,k=void 0===_;if(k){var B=h(I),M=!B&&d(I),S=!B&&!M&&v(I);_=I,B||M||S?h(E)?_=E:u(E)?_=a(E):M?(k=!1,_=i(I,!0)):S?(k=!1,_=o(I,!0)):_=[]:p(I)||l(I)?(_=E,l(E)?_=m(E):(!f(E)||c(E))&&(_=s(I))):k=!1}k&&(w.set(I,_),x(_,I,y,b,w),w.delete(I)),n(e,r,_)}},99398,(e,t,r)=>{var n=e.r(98620),i=e.r(73694),o=e.r(64353),a=e.r(75614),s=e.r(3275),l=e.r(84663),h=e.r(43514);t.exports=function e(t,r,u,d,c){t!==r&&o(r,function(o,l){if(c||(c=new n),s(o))a(t,r,l,u,e,d,c);else{var f=d?d(h(t,l),o,l+"",t,r,c):void 0;void 0===f&&(f=o),i(t,l,f)}},l)}},44115,(e,t,r)=>{var n=e.r(23428),i=e.r(22986);t.exports=function(e){return n(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var l=r[n];l&&e(t,l,n,a)}return t})}},8378,(e,t,r)=>{var n=e.r(99398);t.exports=e.r(44115)(function(e,t,r){n(e,t,r)})},64323,(e,t,r)=>{var n=e.r(92714),i=e.r(5792),o=e.r(1310);t.exports=function(e,t){return e&&e.length?n(e,i(t,2),o):void 0}},27460,(e,t,r)=>{var n=e.r(93035),i=e.r(78969),o=e.r(5251),a=e.r(3275),s=e.r(98921);t.exports=function(e,t,r,l){if(!a(e))return e;t=i(t,e);for(var h=-1,u=t.length,d=u-1,c=e;null!=c&&++h<u;){var f=s(t[h]),p=r;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(h!=d){var v=c[f];void 0===(p=l?l(v,f,c):void 0)&&(p=a(v)?v:o(t[h+1])?[]:{})}n(c,f,p),c=c[f]}return e}},65621,(e,t,r)=>{var n=e.r(62840),i=e.r(27460),o=e.r(78969);t.exports=function(e,t,r){for(var a=-1,s=t.length,l={};++a<s;){var h=t[a],u=n(e,h);r(u,h)&&i(l,o(h,e),u)}return l}},33219,(e,t,r)=>{var n=e.r(65621),i=e.r(17217);t.exports=function(e,t){return n(e,t,function(t,r){return i(e,r)})}},10228,(e,t,r)=>{var n=e.r(51660),i=e.r(99491),o=e.r(35886);t.exports=function(e){return o(i(e,void 0,n),e+"")}},8040,(e,t,r)=>{var n=e.r(33219);t.exports=e.r(10228)(function(e,t){return null==e?{}:n(e,t)})},77718,(e,t,r)=>{var n=e.r(82346),i=0;t.exports=function(e){var t=++i;return n(e)+t}},77349,(e,t,r)=>{t.exports=function(e,t,r){for(var n=-1,i=e.length,o=t.length,a={};++n<i;){var s=n<o?t[n]:void 0;r(a,e[n],s)}return a}},98736,(e,t,r)=>{var n=e.r(93035),i=e.r(77349);t.exports=function(e,t){return i(e||[],t||[],n)}},80018,(e,t,r)=>{var n;try{n={cloneDeep:e.r(21679),constant:e.r(65359),defaults:e.r(90031),each:e.r(6557),filter:e.r(11649),find:e.r(62046),flatten:e.r(51660),forEach:e.r(38794),forIn:e.r(36738),has:e.r(63997),isUndefined:e.r(19481),last:e.r(7535),map:e.r(82447),mapValues:e.r(856),max:e.r(21350),merge:e.r(8378),min:e.r(10815),minBy:e.r(64323),now:e.r(2063),pick:e.r(8040),range:e.r(21689),reduce:e.r(37696),sortBy:e.r(48908),uniqueId:e.r(77718),values:e.r(36890),zipObject:e.r(98736)}}catch(e){}n||(n=window._),t.exports=n},58124,(e,t,r)=>{function n(){var e={};e._next=e._prev=e,this._sentinel=e}function i(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function o(e,t){if("_next"!==e&&"_prev"!==e)return t}t.exports=n,n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return i(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&i(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,o)),r=r._prev;return"["+e.join(", ")+"]"}},90531,(e,t,r)=>{var n=e.r(80018),i=e.r(68779).Graph,o=e.r(58124);t.exports=function(e,t){if(1>=e.nodeCount())return[];var r,h,u,d,c,f,p,v=(r=e,h=t||a,u=new i,d=0,c=0,n.forEach(r.nodes(),function(e){u.setNode(e,{v:e,in:0,out:0})}),n.forEach(r.edges(),function(e){var t=u.edge(e.v,e.w)||0,r=h(e);u.setEdge(e.v,e.w,t+r),c=Math.max(c,u.node(e.v).out+=r),d=Math.max(d,u.node(e.w).in+=r)}),f=n.range(c+d+3).map(function(){return new o}),p=d+1,n.forEach(u.nodes(),function(e){l(f,p,u.node(e))}),{graph:u,buckets:f,zeroIdx:p}),g=function(e,t,r){for(var n,i=[],o=t[t.length-1],a=t[0];e.nodeCount();){for(;n=a.dequeue();)s(e,t,r,n);for(;n=o.dequeue();)s(e,t,r,n);if(e.nodeCount()){for(var l=t.length-2;l>0;--l)if(n=t[l].dequeue()){i=i.concat(s(e,t,r,n,!0));break}}}return i}(v.graph,v.buckets,v.zeroIdx);return n.flatten(n.map(g,function(t){return e.outEdges(t.v,t.w)}),!0)};var a=n.constant(1);function s(e,t,r,i,o){var a=o?[]:void 0;return n.forEach(e.inEdges(i.v),function(n){var i=e.edge(n),s=e.node(n.v);o&&a.push({v:n.v,w:n.w}),s.out-=i,l(t,r,s)}),n.forEach(e.outEdges(i.v),function(n){var i=e.edge(n),o=n.w,a=e.node(o);a.in-=i,l(t,r,a)}),e.removeNode(i.v),a}function l(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}},44773,(e,t,r)=>{"use strict";var n=e.r(80018),i=e.r(90531);t.exports={run:function(e){var t,r,o,a,s,l="greedy"===e.graph().acyclicer?i(e,(t=e,function(e){return t.edge(e).weight})):(r=e,o=[],a={},s={},n.forEach(r.nodes(),function e(t){n.has(s,t)||(s[t]=!0,a[t]=!0,n.forEach(r.outEdges(t),function(t){n.has(a,t.w)?o.push(t):e(t.w)}),delete a[t])}),o);n.forEach(l,function(t){var r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,n.uniqueId("rev"))})},undo:function(e){n.forEach(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}}},68521,(e,t,r)=>{"use strict";var n=e.r(80018),i=e.r(68779).Graph;function o(e,t,r,i){var o;do o=n.uniqueId(i);while(e.hasNode(o))return r.dummy=t,e.setNode(o,r),o}function a(e){return n.max(n.map(e.nodes(),function(t){var r=e.node(t).rank;if(!n.isUndefined(r))return r}))}t.exports={addDummyNode:o,simplify:function(e){var t=new i().setGraph(e.graph());return n.forEach(e.nodes(),function(r){t.setNode(r,e.node(r))}),n.forEach(e.edges(),function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1},i=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t},asNonCompoundGraph:function(e){var t=new i({multigraph:e.isMultigraph()}).setGraph(e.graph());return n.forEach(e.nodes(),function(r){e.children(r).length||t.setNode(r,e.node(r))}),n.forEach(e.edges(),function(r){t.setEdge(r,e.edge(r))}),t},successorWeights:function(e){var t=n.map(e.nodes(),function(t){var r={};return n.forEach(e.outEdges(t),function(t){r[t.w]=(r[t.w]||0)+e.edge(t).weight}),r});return n.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=n.map(e.nodes(),function(t){var r={};return n.forEach(e.inEdges(t),function(t){r[t.v]=(r[t.v]||0)+e.edge(t).weight}),r});return n.zipObject(e.nodes(),t)},intersectRect:function(e,t){var r,n,i=e.x,o=e.y,a=t.x-i,s=t.y-o,l=e.width/2,h=e.height/2;if(!a&&!s)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(a)*h?(s<0&&(h=-h),r=h*a/s,n=h):(a<0&&(l=-l),r=l,n=l*s/a),{x:i+r,y:o+n}},buildLayerMatrix:function(e){var t=n.map(n.range(a(e)+1),function(){return[]});return n.forEach(e.nodes(),function(r){var i=e.node(r),o=i.rank;n.isUndefined(o)||(t[o][i.order]=r)}),t},normalizeRanks:function(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank}));n.forEach(e.nodes(),function(r){var i=e.node(r);n.has(i,"rank")&&(i.rank-=t)})},removeEmptyRanks:function(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank})),r=[];n.forEach(e.nodes(),function(n){var i=e.node(n).rank-t;r[i]||(r[i]=[]),r[i].push(n)});var i=0,o=e.graph().nodeRankFactor;n.forEach(r,function(t,r){n.isUndefined(t)&&r%o!=0?--i:i&&n.forEach(t,function(t){e.node(t).rank+=i})})},addBorderNode:function(e,t,r,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),o(e,"border",i,t)},maxRank:a,partition:function(e,t){var r={lhs:[],rhs:[]};return n.forEach(e,function(e){t(e)?r.lhs.push(e):r.rhs.push(e)}),r},time:function(e,t){var r=n.now();try{return t()}finally{console.log(e+" time: "+(n.now()-r)+"ms")}},notime:function(e,t){return t()}}},93776,(e,t,r)=>{"use strict";var n=e.r(80018),i=e.r(68521);t.exports={run:function(e){e.graph().dummyChains=[],n.forEach(e.edges(),function(t){!function(e,t){var r,n,o,a=t.v,s=e.node(a).rank,l=t.w,h=e.node(l).rank,u=t.name,d=e.edge(t),c=d.labelRank;if(h!==s+1){for(e.removeEdge(t),o=0,++s;s<h;++o,++s)d.points=[],n={width:0,height:0,edgeLabel:d,edgeObj:t,rank:s},r=i.addDummyNode(e,"edge",n,"_d"),s===c&&(n.width=d.width,n.height=d.height,n.dummy="edge-label",n.labelpos=d.labelpos),e.setEdge(a,r,{weight:d.weight},u),0===o&&e.graph().dummyChains.push(r),a=r;e.setEdge(a,l,{weight:d.weight},u)}}(e,t)})},undo:function(e){n.forEach(e.graph().dummyChains,function(t){var r,n=e.node(t),i=n.edgeLabel;for(e.setEdge(n.edgeObj,i);n.dummy;)r=e.successors(t)[0],e.removeNode(t),i.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),t=r,n=e.node(t)})}}},13590,(e,t,r)=>{"use strict";var n=e.r(80018);t.exports={longestPath:function(e){var t={};n.forEach(e.sources(),function r(i){var o=e.node(i);if(n.has(t,i))return o.rank;t[i]=!0;var a=n.min(n.map(e.outEdges(i),function(t){return r(t.w)-e.edge(t).minlen}));return(a===1/0||null==a)&&(a=0),o.rank=a})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},24175,(e,t,r)=>{"use strict";var n=e.r(80018),i=e.r(68779).Graph,o=e.r(13590).slack;t.exports=function(e){var t,r,a,s,l=new i({directed:!1}),h=e.nodes()[0],u=e.nodeCount();for(l.setNode(h,{});t=l,r=e,n.forEach(t.nodes(),function e(i){n.forEach(r.nodeEdges(i),function(n){var a=n.v,s=i===a?n.w:a;t.hasNode(s)||o(r,n)||(t.setNode(s,{}),t.setEdge(i,s,{}),e(s))})}),t.nodeCount()<u;)a=function(e,t){return n.minBy(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return o(t,r)})}(l,e),s=l.hasNode(a.v)?o(e,a):-o(e,a),function(e,t,r){n.forEach(e.nodes(),function(e){t.node(e).rank+=r})}(l,e,s);return l}},22002,(e,t,r)=>{"use strict";var n=e.r(80018),i=e.r(24175),o=e.r(13590).slack,a=e.r(13590).longestPath,s=e.r(68779).alg.preorder,l=e.r(68779).alg.postorder,h=e.r(68521).simplify;function u(e){a(e=h(e));var t,r,n=i(e);for(f(n),d(n,e);t=p(n);)r=v(n,e,t),g(n,e,t,r)}function d(e,t){var r=l(e,e.nodes());r=r.slice(0,r.length-1),n.forEach(r,function(r){var n,i,o,a;n=e,i=t,o=r,a=n.node(o).parent,n.edge(o,a).cutvalue=c(n,i,o)})}function c(e,t,r){var i=e.node(r).parent,o=!0,a=t.edge(r,i),s=0;return a||(o=!1,a=t.edge(i,r)),s=a.weight,n.forEach(t.nodeEdges(r),function(n){var a=n.v===r,l=a?n.w:n.v;if(l!==i){var h,u,d,c=a===o,f=t.edge(n).weight;if(s+=c?f:-f,h=e,u=r,d=l,h.hasEdge(u,d)){var p=e.edge(r,l).cutvalue;s+=c?-p:p}}}),s}function f(e,t){arguments.length<2&&(t=e.nodes()[0]),function e(t,r,i,o,a){var s=i,l=t.node(o);return r[o]=!0,n.forEach(t.neighbors(o),function(a){n.has(r,a)||(i=e(t,r,i,a,o))}),l.low=s,l.lim=i++,a?l.parent=a:delete l.parent,i}(e,{},1,t)}function p(e){return n.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function v(e,t,r){var i=r.v,a=r.w;t.hasEdge(i,a)||(i=r.w,a=r.v);var s=e.node(i),l=e.node(a),h=s,u=!1;s.lim>l.lim&&(h=l,u=!0);var d=n.filter(t.edges(),function(t){return u===m(e,e.node(t.v),h)&&u!==m(e,e.node(t.w),h)});return n.minBy(d,function(e){return o(t,e)})}function g(e,t,r,i){var o,a,l,h,u=r.v,c=r.w;e.removeEdge(u,c),e.setEdge(i.v,i.w,{}),f(e),d(e,t),o=e,a=t,l=n.find(o.nodes(),function(e){return!a.node(e).parent}),h=(h=s(o,l)).slice(1),n.forEach(h,function(e){var t=o.node(e).parent,r=a.edge(e,t),n=!1;r||(r=a.edge(t,e),n=!0),a.node(e).rank=a.node(t).rank+(n?r.minlen:-r.minlen)})}function m(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}t.exports=u,u.initLowLimValues=f,u.initCutValues=d,u.calcCutValue=c,u.leaveEdge=p,u.enterEdge=v,u.exchangeEdges=g},45071,(e,t,r)=>{"use strict";var n=e.r(13590).longestPath,i=e.r(24175),o=e.r(22002);t.exports=function(e){switch(e.graph().ranker){case"network-simplex":default:o(e);break;case"tight-tree":var t;n(t=e),i(t);break;case"longest-path":a(e)}};var a=n},24129,(e,t,r)=>{var n=e.r(80018);t.exports=function(e){var t,r,i,o=(t=e,r={},i=0,n.forEach(t.children(),function e(o){var a=i;n.forEach(t.children(o),e),r[o]={low:a,lim:i++}}),r);n.forEach(e.graph().dummyChains,function(t){for(var r=e.node(t),n=r.edgeObj,i=function(e,t,r,n){var i,o,a=[],s=[],l=Math.min(t[r].low,t[n].low),h=Math.max(t[r].lim,t[n].lim);i=r;do a.push(i=e.parent(i));while(i&&(t[i].low>l||h>t[i].lim))for(o=i,i=n;(i=e.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(e,o,n.v,n.w),a=i.path,s=i.lca,l=0,h=a[0],u=!0;t!==n.w;){if(r=e.node(t),u){for(;(h=a[l])!==s&&e.node(h).maxRank<r.rank;)l++;h===s&&(u=!1)}if(!u){for(;l<a.length-1&&e.node(h=a[l+1]).minRank<=r.rank;)l++;h=a[l]}e.setParent(t,h),t=e.successors(t)[0]}})}},70593,(e,t,r)=>{var n=e.r(80018),i=e.r(68521);t.exports={run:function(e){var t,r,o,a=i.addDummyNode(e,"root",{},"_root"),s=(t=e,r={},n.forEach(t.children(),function(e){!function e(i,o){var a=t.children(i);a&&a.length&&n.forEach(a,function(t){e(t,o+1)}),r[i]=o}(e,1)}),r),l=n.max(n.values(s))-1,h=2*l+1;e.graph().nestingRoot=a,n.forEach(e.edges(),function(t){e.edge(t).minlen*=h});var u=(o=e,n.reduce(o.edges(),function(e,t){return e+o.edge(t).weight},0)+1);n.forEach(e.children(),function(t){!function e(t,r,o,a,s,l,h){var u=t.children(h);if(!u.length){h!==r&&t.setEdge(r,h,{weight:0,minlen:o});return}var d=i.addBorderNode(t,"_bt"),c=i.addBorderNode(t,"_bb"),f=t.node(h);t.setParent(d,h),f.borderTop=d,t.setParent(c,h),f.borderBottom=c,n.forEach(u,function(n){e(t,r,o,a,s,l,n);var i=t.node(n),u=i.borderTop?i.borderTop:n,f=i.borderBottom?i.borderBottom:n,p=i.borderTop?a:2*a,v=u!==f?1:s-l[h]+1;t.setEdge(d,u,{weight:p,minlen:v,nestingEdge:!0}),t.setEdge(f,c,{weight:p,minlen:v,nestingEdge:!0})}),t.parent(h)||t.setEdge(r,d,{weight:0,minlen:s+l[h]})}(e,a,h,u,l,s,t)}),e.graph().nodeRankFactor=h},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,n.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}},59057,(e,t,r)=>{var n=e.r(80018),i=e.r(68521);function o(e,t,r,n,o,a){var s=o[t][a-1],l=i.addDummyNode(e,"border",{width:0,height:0,rank:a,borderType:t},r);o[t][a]=l,e.setParent(l,n),s&&e.setEdge(s,l,{weight:1})}t.exports=function(e){n.forEach(e.children(),function t(r){var i=e.children(r),a=e.node(r);if(i.length&&n.forEach(i,t),n.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,l=a.maxRank+1;s<l;++s)o(e,"borderLeft","_bl",r,a,s),o(e,"borderRight","_br",r,a,s)}})}},18252,(e,t,r)=>{"use strict";var n=e.r(80018);function i(e){n.forEach(e.nodes(),function(t){o(e.node(t))}),n.forEach(e.edges(),function(t){o(e.edge(t))})}function o(e){var t=e.width;e.width=e.height,e.height=t}function a(e){e.y=-e.y}function s(e){var t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&i(e)},undo:function(e){var t,r,o=e.graph().rankdir.toLowerCase();("bt"===o||"rl"===o)&&(t=e,n.forEach(t.nodes(),function(e){a(t.node(e))}),n.forEach(t.edges(),function(e){var r=t.edge(e);n.forEach(r.points,a),n.has(r,"y")&&a(r)})),("lr"===o||"rl"===o)&&(r=e,n.forEach(r.nodes(),function(e){s(r.node(e))}),n.forEach(r.edges(),function(e){var t=r.edge(e);n.forEach(t.points,s),n.has(t,"x")&&s(t)}),i(e))}}},10467,(e,t,r)=>{"use strict";var n=e.r(80018);t.exports=function(e){var t={},r=n.filter(e.nodes(),function(t){return!e.children(t).length}),i=n.max(n.map(r,function(t){return e.node(t).rank})),o=n.map(n.range(i+1),function(){return[]}),a=n.sortBy(r,function(t){return e.node(t).rank});return n.forEach(a,function r(i){n.has(t,i)||(t[i]=!0,o[e.node(i).rank].push(i),n.forEach(e.successors(i),r))}),o}},30332,(e,t,r)=>{"use strict";var n=e.r(80018);t.exports=function(e,t){for(var r=0,i=1;i<t.length;++i)r+=function(e,t,r){for(var i=n.zipObject(r,n.map(r,function(e,t){return t})),o=n.flatten(n.map(t,function(t){return n.sortBy(n.map(e.outEdges(t),function(t){return{pos:i[t.w],weight:e.edge(t).weight}}),"pos")}),!0),a=1;a<r.length;)a<<=1;var s=2*a-1;a-=1;var l=n.map(Array(s),function(){return 0}),h=0;return n.forEach(o.forEach(function(e){var t=e.pos+a;l[t]+=e.weight;for(var r=0;t>0;)t%2&&(r+=l[t+1]),t=t-1>>1,l[t]+=e.weight;h+=e.weight*r})),h}(e,t[i-1],t[i]);return r}},37424,(e,t,r)=>{var n=e.r(80018);t.exports=function(e,t){return n.map(t,function(t){var r=e.inEdges(t);if(!r.length)return{v:t};var i=n.reduce(r,function(t,r){var n=e.edge(r),i=e.node(r.v);return{sum:t.sum+n.weight*i.order,weight:t.weight+n.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}})}},80666,(e,t,r)=>{"use strict";var n=e.r(80018);t.exports=function(e,t){var r={};return n.forEach(e,function(e,t){var i=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};n.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)}),n.forEach(t.edges(),function(e){var t=r[e.v],i=r[e.w];n.isUndefined(t)||n.isUndefined(i)||(i.indegree++,t.out.push(r[e.w]))}),function(e){for(var t=[];e.length;){var r=e.pop();t.push(r),n.forEach(r.in.reverse(),function(e){return function(t){!t.merged&&(n.isUndefined(t.barycenter)||n.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}(r)),n.forEach(r.out,function(t){return function(r){r.in.push(t),0==--r.indegree&&e.push(r)}}(r))}return n.map(n.filter(t,function(e){return!e.merged}),function(e){return n.pick(e,["vs","i","barycenter","weight"])})}(n.filter(r,function(e){return!e.indegree}))}},9752,(e,t,r)=>{var n=e.r(80018),i=e.r(68521);function o(e,t,r){for(var i;t.length&&(i=n.last(t)).i<=r;)t.pop(),e.push(i.vs),r++;return r}t.exports=function(e,t){var r,a=i.partition(e,function(e){return n.has(e,"barycenter")}),s=a.lhs,l=n.sortBy(a.rhs,function(e){return-e.i}),h=[],u=0,d=0,c=0;s.sort((r=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:r?t.i-e.i:e.i-t.i})),c=o(h,l,c),n.forEach(s,function(e){c+=e.vs.length,h.push(e.vs),u+=e.barycenter*e.weight,d+=e.weight,c=o(h,l,c)});var f={vs:n.flatten(h,!0)};return d&&(f.barycenter=u/d,f.weight=d),f}},28055,(e,t,r)=>{var n=e.r(80018),i=e.r(37424),o=e.r(80666),a=e.r(9752);t.exports=function e(t,r,s,l){var h,u,d=t.children(r),c=t.node(r),f=c?c.borderLeft:void 0,p=c?c.borderRight:void 0,v={};f&&(d=n.filter(d,function(e){return e!==f&&e!==p}));var g=i(t,d);n.forEach(g,function(r){if(t.children(r.v).length){var i,o,a=e(t,r.v,s,l);v[r.v]=a,n.has(a,"barycenter")&&(i=r,o=a,n.isUndefined(i.barycenter)?(i.barycenter=o.barycenter,i.weight=o.weight):(i.barycenter=(i.barycenter*i.weight+o.barycenter*o.weight)/(i.weight+o.weight),i.weight+=o.weight))}});var m=o(g,s);h=m,u=v,n.forEach(h,function(e){e.vs=n.flatten(e.vs.map(function(e){return u[e]?u[e].vs:e}),!0)});var y=a(m,l);if(f&&(y.vs=n.flatten([f,y.vs,p],!0),t.predecessors(f).length)){var x=t.node(t.predecessors(f)[0]),b=t.node(t.predecessors(p)[0]);n.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+x.order+b.order)/(y.weight+2),y.weight+=2}return y}},18670,(e,t,r)=>{var n=e.r(80018),i=e.r(68779).Graph;t.exports=function(e,t,r){var o=function(e){for(var t;e.hasNode(t=n.uniqueId("_root")););return t}(e),a=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(t){return e.node(t)});return n.forEach(e.nodes(),function(i){var s=e.node(i),l=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(a.setNode(i),a.setParent(i,l||o),n.forEach(e[r](i),function(t){var r=t.v===i?t.w:t.v,o=a.edge(r,i),s=n.isUndefined(o)?0:o.weight;a.setEdge(r,i,{weight:e.edge(t).weight+s})}),n.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),a}},85757,(e,t,r)=>{var n=e.r(80018);t.exports=function(e,t,r){var i,o={};n.forEach(r,function(r){for(var n,a,s=e.parent(r);s;){if((n=e.parent(s))?(a=o[n],o[n]=s):(a=i,i=s),a&&a!==s)return void t.setEdge(a,s);s=n}})}},40866,(e,t,r)=>{"use strict";var n=e.r(80018),i=e.r(10467),o=e.r(30332),a=e.r(28055),s=e.r(18670),l=e.r(85757),h=e.r(68779).Graph,u=e.r(68521);function d(e,t,r){return n.map(t,function(t){return s(e,t,r)})}function c(e,t){n.forEach(t,function(t){n.forEach(t,function(t,r){e.node(t).order=r})})}t.exports=function(e){var t=u.maxRank(e),r=d(e,n.range(1,t+1),"inEdges"),s=d(e,n.range(t-1,-1,-1),"outEdges"),f=i(e);c(e,f);for(var p,v=1/0,g=0,m=0;m<4;++g,++m){(function(e,t){var r=new h;n.forEach(e,function(e){var i=e.graph().root,o=a(e,i,r,t);n.forEach(o.vs,function(t,r){e.node(t).order=r}),l(e,r,o.vs)})})(g%2?r:s,g%4>=2),f=u.buildLayerMatrix(e);var y=o(e,f);y<v&&(m=0,p=n.cloneDeep(f),v=y)}c(e,p)}},60115,(e,t,r)=>{"use strict";var n=e.r(80018),i=e.r(68779).Graph,o=e.r(68521);function a(e,t){var r={};return n.reduce(t,function(t,i){var o=0,a=0,s=t.length,h=n.last(i);return n.forEach(i,function(t,u){var d=function(e,t){if(e.node(t).dummy)return n.find(e.predecessors(t),function(t){return e.node(t).dummy})}(e,t),c=d?e.node(d).order:s;(d||t===h)&&(n.forEach(i.slice(a,u+1),function(t){n.forEach(e.predecessors(t),function(n){var i=e.node(n),a=i.order;(a<o||c<a)&&!(i.dummy&&e.node(t).dummy)&&l(r,n,t)})}),a=u+1,o=c)}),i}),r}function s(e,t){var r={};function i(t,i,o,a,s){var h;n.forEach(n.range(i,o),function(i){h=t[i],e.node(h).dummy&&n.forEach(e.predecessors(h),function(t){var n=e.node(t);n.dummy&&(n.order<a||n.order>s)&&l(r,t,h)})})}return n.reduce(t,function(t,r){var o,a=-1,s=0;return n.forEach(r,function(n,l){if("border"===e.node(n).dummy){var h=e.predecessors(n);h.length&&(o=e.node(h[0]).order,i(r,s,l,a,o),s=l,a=o)}i(r,s,r.length,o,t.length)}),r}),r}function l(e,t,r){if(t>r){var n=t;t=r,r=n}var i=e[t];i||(e[t]=i={}),i[r]=!0}function h(e,t,r){if(t>r){var i=t;t=r,r=i}return n.has(e[t],r)}function u(e,t,r,i){var o={},a={},s={};return n.forEach(t,function(e){n.forEach(e,function(e,t){o[e]=e,a[e]=e,s[e]=t})}),n.forEach(t,function(e){var t=-1;n.forEach(e,function(e){var l=i(e);if(l.length)for(var u=((l=n.sortBy(l,function(e){return s[e]})).length-1)/2,d=Math.floor(u),c=Math.ceil(u);d<=c;++d){var f=l[d];a[e]===e&&t<s[f]&&!h(r,e,f)&&(a[f]=e,a[e]=o[e]=o[f],t=s[f])}})}),{root:o,align:a}}function d(e,t,r,o,a){var s,l,h,u,d,c,f,p,v,g,m={},y=(s=e,l=t,h=r,u=a,p=new i,g=(d=(v=s.graph()).nodesep,c=v.edgesep,f=u,function(e,t,r){var i,o,a=e.node(t),s=e.node(r);if(i=0+a.width/2,n.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":o=-a.width/2;break;case"r":o=a.width/2}if(o&&(i+=f?o:-o),o=0,i+=(a.dummy?c:d)/2,i+=(s.dummy?c:d)/2,i+=s.width/2,n.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":o=s.width/2;break;case"r":o=-s.width/2}return o&&(i+=f?o:-o),o=0,i}),n.forEach(l,function(e){var t;n.forEach(e,function(e){var r=h[e];if(p.setNode(r),t){var n=h[t],i=p.edge(n,r);p.setEdge(n,r,Math.max(g(s,e,t),i||0))}t=e})}),p),x=a?"borderLeft":"borderRight";function b(e,t){for(var r=y.nodes(),n=r.pop(),i={};n;)i[n]?e(n):(i[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()}return b(function(e){m[e]=y.inEdges(e).reduce(function(e,t){return Math.max(e,m[t.v]+y.edge(t))},0)},y.predecessors.bind(y)),b(function(t){var r=y.outEdges(t).reduce(function(e,t){return Math.min(e,m[t.w]-y.edge(t))},1/0),n=e.node(t);r!==1/0&&n.borderType!==x&&(m[t]=Math.max(m[t],r))},y.successors.bind(y)),n.forEach(o,function(e){m[e]=m[r[e]]}),m}function c(e,t){return n.minBy(n.values(t),function(t){var r=-1/0,i=1/0;return n.forIn(t,function(t,n){var o,a,s=(o=e,a=n,o.node(a).width/2);r=Math.max(t+s,r),i=Math.min(t-s,i)}),r-i})}function f(e,t){var r=n.values(t),i=n.min(r),o=n.max(r);n.forEach(["u","d"],function(r){n.forEach(["l","r"],function(a){var s,l=r+a,h=e[l];if(h!==t){var u=n.values(h);(s="l"===a?i-n.min(u):o-n.max(u))&&(e[l]=n.mapValues(h,function(e){return e+s}))}})})}function p(e,t){return n.mapValues(e.ul,function(r,i){if(t)return e[t.toLowerCase()][i];var o=n.sortBy(n.map(e,i));return(o[1]+o[2])/2})}t.exports={positionX:function(e){var t,r=o.buildLayerMatrix(e),i=n.merge(a(e,r),s(e,r)),l={};n.forEach(["u","d"],function(o){t="u"===o?r:n.values(r).reverse(),n.forEach(["l","r"],function(r){"r"===r&&(t=n.map(t,function(e){return n.values(e).reverse()}));var a=("u"===o?e.predecessors:e.successors).bind(e),s=u(e,t,i,a),h=d(e,t,s.root,s.align,"r"===r);"r"===r&&(h=n.mapValues(h,function(e){return-e})),l[o+r]=h})});var h=c(e,l);return f(l,h),p(l,e.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:l,hasConflict:h,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:f,findSmallestWidthAlignment:c,balance:p}},351,(e,t,r)=>{"use strict";var n=e.r(80018),i=e.r(68521),o=e.r(60115).positionX;t.exports=function(e){var t,r,a,s;t=e=i.asNonCompoundGraph(e),r=i.buildLayerMatrix(t),a=t.graph().ranksep,s=0,n.forEach(r,function(e){var r=n.max(n.map(e,function(e){return t.node(e).height}));n.forEach(e,function(e){t.node(e).y=s+r/2}),s+=r+a}),n.forEach(o(e),function(t,r){e.node(r).x=t})}},30581,(e,t,r)=>{"use strict";var n=e.r(80018),i=e.r(44773),o=e.r(93776),a=e.r(45071),s=e.r(68521).normalizeRanks,l=e.r(24129),h=e.r(68521).removeEmptyRanks,u=e.r(70593),d=e.r(59057),c=e.r(18252),f=e.r(40866),p=e.r(351),v=e.r(68521),g=e.r(68779).Graph;t.exports=function(e,t){var r=t&&t.debugTiming?v.time:v.notime;r("layout",function(){var t=r("  buildLayoutGraph",function(){var t,r,i;return t=e,r=new g({multigraph:!0,compound:!0}),i=k(t.graph()),r.setGraph(n.merge({},y,_(i,m),n.pick(i,x))),n.forEach(t.nodes(),function(e){var i=k(t.node(e));r.setNode(e,n.defaults(_(i,b),w)),r.setParent(e,t.parent(e))}),n.forEach(t.edges(),function(e){var i=k(t.edge(e));r.setEdge(e,n.merge({},I,_(i,E),n.pick(i,C)))}),r});r("  runLayout",function(){var e,g;e=t,(g=r)("    makeSpaceForEdgeLabels",function(){var t,r;r=(t=e).graph(),r.ranksep/=2,n.forEach(t.edges(),function(e){var n=t.edge(e);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===r.rankdir||"BT"===r.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)})}),g("    removeSelfEdges",function(){var t;t=e,n.forEach(t.edges(),function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}),g("    acyclic",function(){i.run(e)}),g("    nestingGraph.run",function(){u.run(e)}),g("    rank",function(){a(v.asNonCompoundGraph(e))}),g("    injectEdgeLabelProxies",function(){var t;t=e,n.forEach(t.edges(),function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),i={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e:e};v.addDummyNode(t,"edge-proxy",i,"_ep")}})}),g("    removeEmptyRanks",function(){h(e)}),g("    nestingGraph.cleanup",function(){u.cleanup(e)}),g("    normalizeRanks",function(){s(e)}),g("    assignRankMinMax",function(){var t,r;t=e,r=0,n.forEach(t.nodes(),function(e){var i=t.node(e);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,r=n.max(r,i.maxRank))}),t.graph().maxRank=r}),g("    removeEdgeLabelProxies",function(){var t;t=e,n.forEach(t.nodes(),function(e){var r=t.node(e);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})}),g("    normalize.run",function(){o.run(e)}),g("    parentDummyChains",function(){l(e)}),g("    addBorderSegments",function(){d(e)}),g("    order",function(){f(e)}),g("    insertSelfEdges",function(){var t,r;t=e,r=v.buildLayerMatrix(t),n.forEach(r,function(e){var r=0;n.forEach(e,function(e,i){var o=t.node(e);o.order=i+r,n.forEach(o.selfEdges,function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++r,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}),g("    adjustCoordinateSystem",function(){c.adjust(e)}),g("    position",function(){p(e)}),g("    positionSelfEdges",function(){var t;t=e,n.forEach(t.nodes(),function(e){var r=t.node(e);if("selfedge"===r.dummy){var n=t.node(r.e.v),i=n.x+n.width/2,o=n.y,a=r.x-i,s=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],r.label.x=r.x,r.label.y=r.y}})}),g("    removeBorderNodes",function(){var t;t=e,n.forEach(t.nodes(),function(e){if(t.children(e).length){var r=t.node(e),i=t.node(r.borderTop),o=t.node(r.borderBottom),a=t.node(n.last(r.borderLeft)),s=t.node(n.last(r.borderRight));r.width=Math.abs(s.x-a.x),r.height=Math.abs(o.y-i.y),r.x=a.x+r.width/2,r.y=i.y+r.height/2}}),n.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}),g("    normalize.undo",function(){o.undo(e)}),g("    fixupEdgeLabelCoords",function(){var t;t=e,n.forEach(t.edges(),function(e){var r=t.edge(e);if(n.has(r,"x"))switch(("l"===r.labelpos||"r"===r.labelpos)&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}})}),g("    undoCoordinateSystem",function(){c.undo(e)}),g("    translateGraph",function(){!function(e){var t=1/0,r=0,i=1/0,o=0,a=e.graph(),s=a.marginx||0,l=a.marginy||0;function h(e){var n=e.x,a=e.y,s=e.width,l=e.height;t=Math.min(t,n-s/2),r=Math.max(r,n+s/2),i=Math.min(i,a-l/2),o=Math.max(o,a+l/2)}n.forEach(e.nodes(),function(t){h(e.node(t))}),n.forEach(e.edges(),function(t){var r=e.edge(t);n.has(r,"x")&&h(r)}),t-=s,i-=l,n.forEach(e.nodes(),function(r){var n=e.node(r);n.x-=t,n.y-=i}),n.forEach(e.edges(),function(r){var o=e.edge(r);n.forEach(o.points,function(e){e.x-=t,e.y-=i}),n.has(o,"x")&&(o.x-=t),n.has(o,"y")&&(o.y-=i)}),a.width=r-t+s,a.height=o-i+l}(e)}),g("    assignNodeIntersects",function(){var t;t=e,n.forEach(t.edges(),function(e){var r,n,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(r=i.points[0],n=i.points[i.points.length-1]):(i.points=[],r=a,n=o),i.points.unshift(v.intersectRect(o,r)),i.points.push(v.intersectRect(a,n))})}),g("    reversePoints",function(){var t;t=e,n.forEach(t.edges(),function(e){var r=t.edge(e);r.reversed&&r.points.reverse()})}),g("    acyclic.undo",function(){i.undo(e)})}),r("  updateInputGraph",function(){var r,i;r=e,i=t,n.forEach(r.nodes(),function(e){var t=r.node(e),n=i.node(e);t&&(t.x=n.x,t.y=n.y,i.children(e).length&&(t.width=n.width,t.height=n.height))}),n.forEach(r.edges(),function(e){var t=r.edge(e),o=i.edge(e);t.points=o.points,n.has(o,"x")&&(t.x=o.x,t.y=o.y)}),r.graph().width=i.graph().width,r.graph().height=i.graph().height})})};var m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],b=["width","height"],w={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],I={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"];function _(e,t){return n.mapValues(n.pick(e,t),Number)}function k(e){var t={};return n.forEach(e,function(e,r){t[r.toLowerCase()]=e}),t}},69914,(e,t,r)=>{var n=e.r(80018),i=e.r(68521),o=e.r(68779).Graph;t.exports={debugOrdering:function(e){var t=i.buildLayerMatrix(e),r=new o({compound:!0,multigraph:!0}).setGraph({});return n.forEach(e.nodes(),function(t){r.setNode(t,{label:t}),r.setParent(t,"layer"+e.node(t).rank)}),n.forEach(e.edges(),function(e){r.setEdge(e.v,e.w,{},e.name)}),n.forEach(t,function(e,t){r.setNode("layer"+t,{rank:"same"}),n.reduce(e,function(e,t){return r.setEdge(e,t,{style:"invis"}),t})}),r}}},89853,(e,t,r)=>{t.exports="0.8.5"},13772,(e,t,r)=>{t.exports={graphlib:e.r(68779),layout:e.r(30581),debug:e.r(69914),util:{time:e.r(68521).time,notime:e.r(68521).notime},version:e.r(89853)}},46236,e=>{"use strict";var t=e.i(12031),r=e.i(643);function n(e){let n=[t.theme.colors.green["100"],t.theme.colors.green["300"],t.theme.colors.yellow["400"],t.theme.colors.orange["500"],t.theme.colors.red["700"]].map(e=>(0,r.tinycolor)(e)),i=(e=Math.min(e=Math.max(e,0),1))*(n.length-1),o=Math.floor(i),a=Math.ceil(i);return(0,r.tinycolor)(n[o]).mix((0,r.tinycolor)(n[a]),(i-o)*100).toHexString()}function i(e,t){return t*(e=Math.min(e=Math.max(e,0),1))+2}function o(e){return 16172352e5+e/65536}function a(e,n){let i=[n,t.theme.colors.yellow["200"],t.theme.colors.orange["300"],t.theme.colors.red["400"]].map(e=>(0,r.tinycolor)(e));if(e<=1e4)return n;if(e>=3e5)return t.theme.colors.red["400"];let o=Math.log(1e4),a=(Math.log(e)-o)/(Math.log(3e5)-o)*(i.length-1),s=Math.floor(a),l=Math.ceil(a);return(0,r.tinycolor)(i[s]).mix((0,r.tinycolor)(i[l]),(a-s)*100).toHexString()}e.s(["backPressureColor",()=>n,"backPressureWidth",()=>i,"epochToUnixMillis",()=>o,"latencyToColor",()=>a])},80951,e=>{"use strict";var t=e.i(91398),r=e.i(52872),n=e.i(87474),i=e.i(12031),o=e.i(43796),a=e.i(55374);e.i(31345);var s=e.i(44588),l=e.i(61723),h=e.i(74238),u=e.i(34731),d=e.i(29593),c=e.i(39127),f=e.i(13772),p=e.i(21679),v=e.i(91788),g=e.i(46236);let m=(0,a.default)(()=>e.A(30875));function y({planNodeDependencies:e,fragmentDependency:a,selectedFragmentId:y,channelStats:x,fragmentStats:b}){let w=(0,v.useRef)(null),{isOpen:E,onOpen:I,onClose:C}=(0,o.useDisclosure)(),[_,k]=(0,v.useState)(),B=(0,v.useCallback)(e=>{k(e),I()},[I,k]),{svgWidth:M,svgHeight:S,edges:j,layoutResult:N,includedFragmentIds:z}=(0,v.useCallback)(()=>{let t=(0,p.default)(e),r=(0,p.default)(a),n=new Map,i=new Set;for(let[e,r]of t){let t=function(e,{dx:t,dy:r}){let n=c.tree().nodeSize([r,t])(e);return n.each(e=>([e.x,e.y]=[e.y,e.x])),n.each(e=>e.x=-e.x),n}(r,{dx:72,dy:48}),{width:o,height:a}=function(e,{margin:{top:t,bottom:r,left:n,right:i}}){let o=1/0,a=-1/0,s=1/0,l=-1/0;return e.each(e=>a=e.x>a?e.x:a),e.each(e=>o=e.x<o?e.x:o),e.each(e=>l=e.y>l?e.y:l),e.each(e=>s=e.y<s?e.y:s),o-=n,a+=i,s-=t,l+=r,e.each(e=>e.x=e.x-o),e.each(e=>e.y=e.y-s),{width:a-o,height:l-s}}(t,{margin:{left:48,right:48,top:36,bottom:48}});n.set(e,{layoutRoot:t,width:o,height:a,actorIds:r.data.actorIds??[]}),i.add(e)}let o=new f.graphlib.Graph;o.setGraph({rankdir:"LR",nodesep:48,ranksep:60,marginx:24,marginy:24}),o.setDefaultEdgeLabel(()=>({})),r.forEach(({id:e,parentIds:t})=>{let r=n.get(e);o.setNode(e,r)}),r.forEach(({id:e,parentIds:t})=>{t?.forEach(t=>{o.setEdge(t,e)})}),f.layout(o);let s=o.nodes().map(e=>{let t=o.node(e);return{id:e,x:t.x-t.width/2,y:t.y-t.height/2,width:t.width,height:t.height,layoutRoot:t.layoutRoot,actorIds:t.actorIds}}),l=o.edges().map(e=>{let t=o.edge(e);return{source:e.v,target:e.w,points:t.points||[]}}),h=0,u=0;return s.forEach(({x:e,y:t,width:r,height:n})=>{h=Math.max(h,e+r+50),u=Math.max(u,t+n+50)}),{layoutResult:s,svgWidth:h,svgHeight:u,edges:l,includedFragmentIds:i}},[e,a])();return(0,v.useEffect)(()=>{if(N){let e=Date.now(),t=w.current,r=s.select(t),n=l.linkHorizontal().x(e=>e.x).y(e=>e.y),o=t=>{t.attr("transform",({x:e,y:t})=>`translate(${e}, ${t})`);let r=t.select(".text-frag-id");r.empty()&&(r=t.append("text").attr("class","text-frag-id")),r.attr("fill","black").text(({id:e})=>`Fragment ${e}`).attr("font-family","inherit").attr("text-anchor","end").attr("dy",({height:e})=>e+12).attr("dx",({width:e})=>e).attr("fill","black").attr("font-size",12);let o=t.select(".text-actor-id");o.empty()&&(o=t.append("text").attr("class","text-actor-id")),o.attr("fill","black").text(({actorIds:e})=>`Actor ${e.join(", ")}`).attr("font-family","inherit").attr("text-anchor","end").attr("dy",({height:e})=>e+24).attr("dx",({width:e})=>e).attr("fill","black").attr("font-size",12);let a=t.select(".bounding-box");a.empty()&&(a=t.append("rect").attr("class","bounding-box")),a.attr("width",({width:e})=>e).attr("height",({height:e})=>e).attr("x",0).attr("y",0).attr("fill",b?({id:t})=>{let r=parseInt(t);if(isNaN(r)||!b[r])return"white";let n=(0,g.epochToUnixMillis)(b[r].currentEpoch);return(0,g.latencyToColor)(e-n,"white")}:"white").attr("stroke-width",({id:e})=>e===y?3:1).attr("rx",5).attr("stroke",({id:e})=>e===y?i.theme.colors.blue[500]:i.theme.colors.gray[500]),a.on("mouseover",(t,{id:r})=>{let n,i,o,a;h.selectAll(".tooltip").remove(),s.select("body").append("div").attr("class","tooltip").style("position","absolute").style("background","white").style("padding","10px").style("border","1px solid #ddd").style("border-radius","4px").style("pointer-events","none").style("left",t.pageX+10+"px").style("top",t.pageY+10+"px").style("font-size","12px").html((n=parseInt(r),o=(i=b?.[n])?((e-(0,g.epochToUnixMillis)(i.currentEpoch))/1e3).toFixed(2):"N/A",a=i?.currentEpoch??"N/A",`<b>Fragment ${n}</b><br>Epoch: ${a}<br>Latency: ${o} seconds`))}).on("mousemove",e=>{s.select(".tooltip").style("left",e.pageX+10+"px").style("top",e.pageY+10+"px")}).on("mouseout",()=>{h.selectAll(".tooltip").remove()});let l=t.select(".edges");l.empty()&&(l=t.append("g").attr("class","edges"));let u=e=>e.attr("d",n),d=l.selectAll("path").data(({layoutRoot:e})=>e.links());d.enter().call(e=>(e.append("path").attr("fill","none").attr("stroke",i.theme.colors.gray[700]).attr("stroke-width",1.5).call(u),e)),d.call(u),d.exit().remove();let c=t.select(".nodes");c.empty()&&(c=t.append("g").attr("class","nodes"));let f=e=>{e.attr("transform",e=>`translate(${e.x},${e.y})`);let t=e.select("circle");t.empty()&&(t=e.append("circle")),t.attr("fill",i.theme.colors.blue[500]).attr("r",12).style("cursor","pointer").on("click",(e,t)=>B(t.data));let r=e.select("text");r.empty()&&(r=e.append("text")),r.attr("fill","black").text(e=>e.data.name).attr("font-family","inherit").attr("text-anchor","middle").attr("dy",21.6).attr("fill","black").attr("font-size",12).attr("transform","rotate(-8)");let n=e.select("title");return n.empty()&&(n=e.append("title")),n.text(e=>e.data.node.identity??e.data.name),e},p=c.selectAll(".stream-node").data(({layoutRoot:e})=>e.descendants());p.exit().remove(),p.enter().call(e=>e.append("g").attr("class","stream-node").call(f)),p.call(f)},a=r.select(".fragments").selectAll(".fragment").data(N);a.enter().call(e=>e.append("g").attr("class","fragment").call(o)),a.call(o),a.exit().remove();let c=r.select(".fragment-edges").selectAll(".fragment-edge").data(j),f=u.curveBasis,p=d.line().curve(f).x(({x:e})=>e).y(({y:e})=>e),v=e=>{let t=e.select("path");t.empty()&&(t=e.append("path"));let r=e=>e.source===y||e.target===y;return t.attr("d",({points:e})=>p(e)).attr("fill","none").attr("stroke-width",e=>{if(x){let t=x.get(`${e.source}_${e.target}`)?.backpressureRate;if(t)return(0,g.backPressureWidth)(t,30)}return r(e)?4:2}).attr("stroke",e=>{if(x){let t=x.get(`${e.source}_${e.target}`)?.backpressureRate;if(t)return(0,g.backPressureColor)(t)}return r(e)?i.theme.colors.blue["500"]:i.theme.colors.gray["300"]}),t.on("mouseover",(e,t)=>{h.selectAll(".tooltip").remove();let r=x?.get(`${t.source}_${t.target}`),n=`<b>Fragment ${t.source}  ${t.target}</b><br>Backpressure: ${r?.backpressureRate!=null?`${(100*r.backpressureRate).toFixed(2)}%`:"N/A"}<br>Recv Throughput: ${r?.recvThroughput!=null?`${r.recvThroughput.toFixed(2)} rows/s`:"N/A"}<br>Send Throughput: ${r?.sendThroughput!=null?`${r.sendThroughput.toFixed(2)} rows/s`:"N/A"}`;s.select("body").append("div").attr("class","tooltip").style("position","absolute").style("background","white").style("padding","10px").style("border","1px solid #ddd").style("border-radius","4px").style("pointer-events","none").style("left",e.pageX+10+"px").style("top",e.pageY+10+"px").style("font-size","12px").html(n)}).on("mousemove",e=>{s.select(".tooltip").style("left",e.pageX+10+"px").style("top",e.pageY+10+"px")}).on("mouseout",()=>{h.selectAll(".tooltip").remove()}),e};c.enter().call(e=>e.append("g").attr("class","fragment-edge").call(v)),c.call(v),c.exit().remove()}},[N,j,x,b,y,B]),(0,t.jsxs)(v.Fragment,{children:[(0,t.jsxs)(n.Modal,{isOpen:E,onClose:C,size:"5xl",children:[(0,t.jsx)(n.ModalOverlay,{}),(0,t.jsxs)(n.ModalContent,{children:[(0,t.jsxs)(n.ModalHeader,{children:[_?.operatorId," - ",_?.name]}),(0,t.jsx)(n.ModalCloseButton,{}),(0,t.jsx)(n.ModalBody,{children:E&&_?.node&&(0,t.jsx)(m,{shouldCollapse:({name:e})=>"input"===e||"fields"===e||"streamKey"===e,src:_.node,collapsed:3,name:null,displayDataTypes:!1})}),(0,t.jsx)(n.ModalFooter,{children:(0,t.jsx)(r.Button,{colorScheme:"blue",mr:3,onClick:C,children:"Close"})})]})]}),(0,t.jsxs)("svg",{ref:w,width:`${M}px`,height:`${S}px`,children:[(0,t.jsx)("g",{className:"fragment-edges"}),(0,t.jsx)("g",{className:"fragments"})]})]})}e.s(["default",()=>y])},17842,e=>{"use strict";var t=e.i(91398),r=e.i(38254),n=e.i(52872),i=e.i(55736),o=e.i(66909),a=e.i(91788);function s({onApply:e,title:s="Time Controls"}){let[l,h]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[c,f]=(0,a.useState)(""),[p,v]=(0,a.useState)(""),[g,m]=(0,a.useState)(""),[y,x]=(0,a.useState)("");return(0,t.jsxs)(r.Box,{children:[(0,t.jsx)(r.Text,{fontWeight:"semibold",mb:3,children:s}),(0,t.jsxs)(r.VStack,{spacing:3,align:"stretch",children:[(0,t.jsxs)(i.FormControl,{isInvalid:!!g,children:[(0,t.jsx)(i.FormLabel,{fontSize:"sm",children:"Timestamp (system timezone)"}),(0,t.jsxs)(r.HStack,{spacing:2,children:[(0,t.jsx)(o.Input,{size:"sm",placeholder:"2024-01-15T10:30:00 (system timezone)",value:l,onChange:e=>h(e.target.value)}),(0,t.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>{let e,t,r,n,i;h((e=new Date,t=Intl.DateTimeFormat().resolvedOptions().timeZone,r=new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t,hour12:!1}).formatToParts(e),n=r.find(e=>"year"===e.type)?.value+"-"+r.find(e=>"month"===e.type)?.value+"-"+r.find(e=>"day"===e.type)?.value,i=r.find(e=>"hour"===e.type)?.value+":"+r.find(e=>"minute"===e.type)?.value+":"+r.find(e=>"second"===e.type)?.value,`${n}T${i}`)),m("")},children:"Now"})]}),g&&(0,t.jsx)(r.Text,{fontSize:"xs",color:"red.500",children:g})]}),(0,t.jsxs)(i.FormControl,{isInvalid:!!y,children:[(0,t.jsx)(i.FormLabel,{fontSize:"sm",children:"Offset"}),(0,t.jsx)(o.Input,{size:"sm",placeholder:"1h, 30m, 2d",value:u,onChange:e=>d(e.target.value)}),y&&(0,t.jsx)(r.Text,{fontSize:"xs",color:"red.500",children:y})]}),(0,t.jsxs)(r.HStack,{spacing:2,children:[(0,t.jsx)(n.Button,{size:"sm",colorScheme:"blue",onClick:()=>{let t,r;if(l.trim())try{t=function(e,t=Intl.DateTimeFormat().resolvedOptions().timeZone){try{let t=new Date(e);if(isNaN(t.getTime()))throw Error("Invalid timestamp format");return Math.floor(t.getTime()/1e3)}catch(e){throw Error("Invalid timestamp format")}}(l),f(new Date(1e3*t).toISOString()),m("")}catch(e){m("Invalid timestamp format");return}else f("");if(u.trim())try{r=function(e){let t=e.match(/^(\d+)([smhd])$/);if(!t)throw Error('Invalid duration format. Use format like "30s", "5m", "2h", "1d"');let r=parseInt(t[1]);switch(t[2]){case"s":return r;case"m":return 60*r;case"h":return 60*r*60;case"d":return 60*r*1440;default:throw Error("Invalid time unit. Use s, m, h, or d")}}(u),v(u),x("")}catch(e){x("Invalid offset format (use: 30s, 5m, 2h, 1d)");return}else v("");e(t,r)},children:"Apply"}),(0,t.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>{h(""),d(""),f(""),v(""),m(""),x(""),e(void 0,void 0)},children:"Reset"})]}),(c||p)&&(0,t.jsxs)(r.Box,{p:2,bg:"gray.50",borderRadius:"md",children:[(0,t.jsx)(r.Text,{fontSize:"xs",fontWeight:"medium",mb:1,children:"Applied Settings:"}),c&&(0,t.jsxs)(r.Text,{fontSize:"xs",color:"gray.600",children:["Timestamp: ",c]}),p&&(0,t.jsxs)(r.Text,{fontSize:"xs",color:"gray.600",children:["Offset: ",p]})]})]})]})}e.s(["default",()=>s],17842)},8234,e=>{"use strict";e.s(["createStreamingStatsRefresh",()=>i]);var t=e.i(8653),r=e.i(27936),n=e.i(84025);function i(e,i,o,a){return function(){let s=new URLSearchParams;a?.at&&s.append("at",a.at.toString()),a?.timeOffset&&s.append("time_offset",a.timeOffset.toString());let l=s.toString(),h=l?`?${l}`:"";n.default.get(`/metrics/streaming_stats_prometheus${h}`).then(t=>{let n=r.GetStreamingPrometheusStatsResponse.fromJSON(t),i=new Map;for(let[e,t]of Object.entries(n.channelStats))i.set(e,{actorCount:t.actorCount,backpressureRate:t.backpressureRate,recvThroughput:t.recvThroughput,sendThroughput:t.sendThroughput});e.setChannelStats(i),"relation"===o&&e.setRelationStats&&n.relationStats?e.setRelationStats(n.relationStats):"fragment"===o&&e.setFragmentStats&&n.fragmentStats&&e.setFragmentStats(n.fragmentStats)},a=>{console.error("Prometheus stats failed, falling back to embedded dashboard:",a),n.default.get(`/metrics/streaming_stats${h}`).then(n=>{let a=r.GetStreamingStatsResponse.fromJSON(n),s=new t.ChannelStatsSnapshot(new Map(Object.entries(a.channelStats)),Date.now());i?e.setChannelStats(s.getRate(i)):i=s,"relation"===o&&e.setRelationStats&&a.relationStats?e.setRelationStats(a.relationStats):"fragment"===o&&e.setFragmentStats&&a.fragmentStats&&e.setFragmentStats(a.fragmentStats)},t=>{console.error("Both Prometheus and embedded dashboard failed:",t),e.toast(t,"error")})})}}},8653,e=>{"use strict";e.s(["ChannelStatsSnapshot",()=>E,"default",()=>I]);var t=e.i(91398),r=e.i(38254),n=e.i(52872),i=e.i(55736),o=e.i(66909),a=e.i(56881),s=e.i(55669);e.i(31345);var l=e.i(89628),h=e.i(30105),u=e.i(43103),d=e.i(58678),c=e.i(95894),f=e.i(91788),p=e.i(83200),v=e.i(80951),g=e.i(17842),m=e.i(8084),y=e.i(31447),x=e.i(8516),b=e.i(32350),w=e.i(8234);class E{metrics;time;constructor(e,t){this.metrics=e,this.time=t}getRate(e){let t=new Map;for(let[r,n]of this.metrics){let i=e.metrics.get(r);if(i){let o=this.time-e.time;t.set(r,{actorCount:n.actorCount,backpressureRate:(n.outputBlockingDuration-i.outputBlockingDuration)/i.actorCount/o/1e6,recvThroughput:(n.recvRowCount-i.recvRowCount)/o*1e3,sendThroughput:(n.sendRowCount-i.sendRowCount)/o*1e3})}}return t}}function I(){let{response:e}=(0,x.default)(b.getStreamingJobs),{response:E}=(0,x.default)(b.getRelationIdInfos),[I,C]=(0,c.useQueryState)("id",c.parseAsInteger),[_,k]=(0,f.useState)(),[B,M]=(0,f.useState)(),S=(0,f.useMemo)(()=>e?.find(e=>e.id===I),[e,I]),j=(0,y.default)();(0,f.useEffect)(()=>{I&&(M(void 0),(0,b.getFragmentsByJobId)(I).then(e=>{M(e)}))},[I]);let N=(0,f.useCallback)(()=>{if(B){let e=function(e){let t=[],r=new Map;for(let t in e.fragments)for(let n of e.fragments[t].actors)r.set(n.actorId,n.fragmentId);for(let r in e.fragments){let n=e.fragments[r],i=new Set,o=new Set;for(let t of n.upstreamFragmentIds)e.fragments[t]?i.add(t):o.add(t);t.push({id:n.fragmentId.toString(),name:`Fragment ${n.fragmentId}`,parentIds:Array.from(i).map(e=>e.toString()),externalParentIds:Array.from(o).map(e=>e.toString()),width:0,height:0,order:n.fragmentId,fragment:n})}return t}(B);return{fragments:B,fragmentDep:e,fragmentDepDag:(0,h.dagStratify)()(e)}}},[B]);(0,f.useEffect)(()=>{e&&!I&&e.length>0&&C(e[0].id)},[I,e,C]);let z=N()?.fragmentDep,V=N()?.fragmentDepDag,R=N()?.fragments,O=(0,f.useCallback)(()=>{let e=R?.fragments;if(e){let t=new Map;for(let r in e){let n=function(e){let t,r=e.actors[0],n=e=>({name:e.nodeBody?.$case?.toString()||"unknown",children:(e.input||[]).map(n),operatorId:e.operatorId,node:e});if(r.dispatcher.length>0){let e=u.default.camelCase(r.dispatcher[0].type.replace(/^DISPATCHER_TYPE_/,""));t=r.dispatcher.length>1?r.dispatcher.every(e=>e.type===r.dispatcher[0].type)?`${e}Dispatchers`:"multipleDispatchers":`${e}Dispatcher`}else t="noDispatcher";let i=e.actors.reduce((e,t)=>(e[t.actorId]=t.dispatcher,e),{});return i.fragment={...e,actors:[]},l.hierarchy({name:t,actorIds:e.actors.map(e=>e.actorId.toString()),children:e.nodes?[n(e.nodes)]:[],operatorId:"dispatcher",node:i})}(e[r]);t.set(r,n)}return t}},[R?.fragments])(),[T,A]=(0,f.useState)(""),[P,F]=(0,f.useState)(""),[L,D]=(0,f.useState)(),[$,U]=(0,f.useState)(),[G,q]=(0,f.useState)();(0,f.useEffect)(()=>{let e,t=(0,w.createStreamingStatsRefresh)({setChannelStats:D,setFragmentStats:U,toast:j},e,"fragment",G);t();let r=setInterval(t,5e3);return()=>{clearInterval(r)}},[j,G]);let W=(0,t.jsxs)(r.Flex,{p:3,height:"calc(100vh - 20px)",flexDirection:"column",children:[(0,t.jsx)(m.default,{children:"Fragment Graph"}),(0,t.jsxs)(r.Flex,{flexDirection:"row",height:"full",width:"full",children:[(0,t.jsxs)(r.VStack,{mr:3,spacing:3,alignItems:"flex-start",width:225,height:"full",children:[(0,t.jsx)(g.default,{onApply:(e,t)=>{q({at:e,timeOffset:t})}}),(0,t.jsxs)(i.FormControl,{children:[(0,t.jsx)(i.FormLabel,{children:"Streaming Jobs"}),(0,t.jsx)(o.Input,{list:"relationList",spellCheck:!1,onChange:t=>{let r=e?.find(e=>e.name==t.target.value)?.id;r&&C(r)},placeholder:"Search...",mb:2}),(0,t.jsx)("datalist",{id:"relationList",children:e&&e.map(e=>(0,t.jsxs)("option",{value:e.name,children:["(",e.id,") ",e.name]},e.id))}),(0,t.jsx)(a.Select,{value:I??void 0,onChange:e=>C(parseInt(e.target.value)),children:e&&e.map(e=>(0,t.jsxs)("option",{value:e.id,children:["(",e.id,") ",e.name]},e.name))})]}),S&&(0,t.jsxs)(i.FormControl,{children:[(0,t.jsx)(i.FormLabel,{children:"Information"}),(0,t.jsx)(s.TableContainer,{children:(0,t.jsx)(s.Table,{size:"sm",children:(0,t.jsxs)(s.Tbody,{children:[(0,t.jsxs)(s.Tr,{children:[(0,t.jsx)(s.Td,{fontWeight:"medium",children:"Type"}),(0,t.jsx)(s.Td,{isNumeric:!0,children:S.type})]}),(0,t.jsxs)(s.Tr,{children:[(0,t.jsx)(s.Td,{fontWeight:"medium",children:"Status"}),(0,t.jsx)(s.Td,{isNumeric:!0,children:S.jobStatus})]}),(0,t.jsxs)(s.Tr,{children:[(0,t.jsx)(s.Td,{fontWeight:"medium",children:"Parallelism"}),(0,t.jsx)(s.Td,{isNumeric:!0,children:S.parallelism})]}),(0,t.jsxs)(s.Tr,{children:[(0,t.jsx)(s.Td,{fontWeight:"medium",paddingEnd:0,children:"Max Parallelism"}),(0,t.jsx)(s.Td,{isNumeric:!0,children:S.maxParallelism})]})]})})})]}),(0,t.jsxs)(i.FormControl,{children:[(0,t.jsx)(i.FormLabel,{children:"Goto"}),(0,t.jsxs)(r.VStack,{spacing:2,children:[(0,t.jsxs)(r.HStack,{children:[(0,t.jsx)(o.Input,{placeholder:"Fragment Id",value:P,onChange:e=>F(e.target.value)}),(0,t.jsx)(n.Button,{onClick:e=>(()=>{let e=parseInt(P);if(E){let t=E.map;for(let r in t){let n=t[r].map;for(let t in n)if(parseInt(t)==e){C(parseInt(r)),k(e);return}}}j(Error(`Fragment ${e} not found`))})(),children:"Go"})]}),(0,t.jsxs)(r.HStack,{children:[(0,t.jsx)(o.Input,{placeholder:"Actor Id",value:T,onChange:e=>A(e.target.value)}),(0,t.jsx)(n.Button,{onClick:e=>(()=>{let e=parseInt(T);if(E){let t=E.map;for(let r in t){let n=t[r].map;for(let t in n)if(n[t].ids.includes(e)){C(parseInt(r)),k(parseInt(t));return}}}j(Error(`Actor ${e} not found`))})(),children:"Go"})]})]})]}),(0,t.jsxs)(r.Flex,{height:"full",width:"full",flexDirection:"column",children:[(0,t.jsx)(r.Text,{fontWeight:"semibold",children:"Fragments"}),V&&(0,t.jsx)(r.Box,{flex:"1",overflowY:"scroll",children:(0,t.jsx)(p.default,{svgWidth:225,fragmentDependency:V,onSelectedIdChange:e=>k(parseInt(e)),selectedId:_?.toString()})})]})]}),(0,t.jsxs)(r.Box,{flex:1,height:"full",ml:3,overflowX:"scroll",overflowY:"scroll",children:[(0,t.jsx)(r.Text,{fontWeight:"semibold",children:"Fragment Graph"}),O&&z&&(0,t.jsx)(v.default,{selectedFragmentId:_?.toString(),fragmentDependency:z,planNodeDependencies:O,channelStats:L,fragmentStats:$})]})]})]});return(0,t.jsxs)(f.Fragment,{children:[(0,t.jsx)(d.default,{children:(0,t.jsx)("title",{children:"Streaming Fragments"})}),W]})}}]);