# mysql

system ok
mysql --host=mysql --port=3306 -u root -p123456 << EOF
CREATE DATABASE rwcdc;
USE rwcdc;
CREATE TABLE table_in_mysql (
    id INT PRIMARY KEY,
    name VARCHAR(255)
);
INSERT INTO table_in_mysql VALUES (1,'11'),(2,'22');
EOF

statement ok
CREATE SOURCE cdc_source_mysql WITH (
    connector = 'mysql-cdc',
    hostname='mysql',
    port=3306,
    database.name='rwcdc',
    username='root',
    password='123456'
);

statement ok
CREATE TABLE mysql_table_in_rw (
    id INT PRIMARY KEY,
    name VARCHAR
)
FROM cdc_source_mysql TABLE 'rwcdc.table_in_mysql';


# postgres

system ok
PGHOST=db PGPORT=5432 PGUSER=postgres PGPASSWORD='post\tgres' PGDATABASE=rwcdc createdb

system ok
PGHOST=db PGPORT=5432 PGUSER=postgres PGPASSWORD='post\tgres' PGDATABASE=rwcdc psql << EOF
CREATE TABLE table_in_postgres (
    id INT PRIMARY KEY,
    name VARCHAR(255)
);
INSERT INTO table_in_postgres VALUES (1,'11'),(2,'22');
EOF

statement ok
CREATE SOURCE cdc_source_postgres WITH (
    connector = 'postgres-cdc',
    hostname='db',
    port=5432,
    database.name='rwcdc',
    username='postgres',
    password='post\tgres'
);

statement ok
CREATE TABLE postgres_table_in_rw (
    id INT PRIMARY KEY,
    name VARCHAR
)
FROM cdc_source_postgres TABLE 'public.table_in_postgres';
